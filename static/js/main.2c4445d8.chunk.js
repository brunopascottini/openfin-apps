(this["webpackJsonpqlik-sense-clone_context"]=this["webpackJsonpqlik-sense-clone_context"]||[]).push([[0],{59:function(e,t,n){e.exports=n(78)},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){var r={"./standard.json":67,"./sunsetblue.json":68};function a(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=c,e.exports=a,a.id=66},67:function(e){e.exports=JSON.parse('{"backgroundColor":"#fff","axisText":{"color":"#555","fontSize":"10px","fontWeight":500,"fontFamily":"Montserrat"},"axisLines":{"strokeWidth":null,"stroke":"#888"},"gridLines":{"strokeWidth":0.5,"stroke":"#aaa"},"labels":{"color":"#000","fontSize":"16px","fontWeight":null,"fontFamily":null},"gradients":{"sequential":"Blues","diverging":["#e42d21","#e8e0bb","#56d73c"]}}')},68:function(e){e.exports=JSON.parse('{"backgroundColor":"rgb(48, 48, 63)","axisText":{"color":"#fff","fontSize":"8px","fontWeight":500,"fontFamily":"Montserrat"},"axisLines":{"strokeWidth":null,"stroke":"#888"},"gridLines":{"strokeWidth":0.5,"stroke":"#aaa"},"labels":{"color":"#fff","fontSize":"16px","fontWeight":null,"fontFamily":null},"selectionHighlight":"#fff","gradients":{"sequential":["rgb(255, 207, 154)","rgb(215, 115, 0)"],"diverging":["#e42d21","#e8e0bb","#56d73c"]},"viewbox":{"backgroundFill":"rgba(255,255,255,0.15)","selectionStroke":"#fff"}}')},78:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(50),o=n.n(c),l=(n(64),n(65),n(5)),i=n(2),s=n(7),u=n(3),f=n(1),d=["standard","sunsetblue"],m=d.map((function(e){return{name:e,data:n(66)("./".concat(e,".json"))}}));function b(e){var t="string"===typeof e.gradients.sequential?f["interpolate"+e.gradients.sequential]:f.interpolateRgbBasis(e.gradients.sequential),n="string"===typeof e.gradients.sequential?f["interpolate"+e.gradients.sequential]:f.interpolateRgbBasis(e.gradients.sequential);return{backgroundColor:e.backgroundColor,axisText:e.axisText||{},axisLines:e.axisLines||{},gridLines:e.gridLines||!1,labels:Object(l.a)(Object(l.a)({},e.labels),{},{title:e.labels&&e.labels.title||{},xAxis:e.labels&&e.labels.xAxis||{},yAxis:e.labels&&e.labels.yAxis||{}}),gradients:{sequential:e.gradients&&e.gradients.sequential||{0:"#020024",37:"#090979",100:"#00d4ff"},diverging:e.gradients&&e.gradients.diverging||{0:"#e42d21",47:"#e8e0bb",100:"#56d73c"}},selectionHighlight:e.selectionHighlight||"#737373",colorScales:{sequential:function(e){return f.scaleSequential(t).domain(e)},diverging:function(e){return f.scaleDiverging(n).domain(e)}},viewbox:e.viewbox||{backgroundFill:"none",selectionFill:"rgba(0,0,0,0.1)",selectionStroke:"#ddd"}}}function p(e){var t=m.find((function(t){return t.name===e}));return b(t?t.data:m[0].data)}function h(){var e=Object(s.a)(["\n  svg {\n    background-color: ","\n  }\n  .axis {\n    .tick line {\n      stroke: ",";\n      stroke-width: ",";\n      display: ","\n    }\n    text {\n      fill: ",";\n      font-family: '","', sans-serif;\n      font-size: ",";\n      font-weight: ",";\n    }\n    .domain {\n      stroke: ",";\n    }\n  }\n  .brush .selection {\n    fill: ",";\n    stroke: ",";\n  }\n  .x-axis-label {\n    fill: ",";\n    font-weight: ",";\n    font-size: ",";\n    font-family: '","', sans-serif;\n  }\n  .y-axis-label {\n    fill: ",";\n    font-weight: ",";\n    font-size: ",";\n    font-family: '","', sans-serif;\n  }\n"]);return h=function(){return e},e}var x=u.b.div(h(),(function(e){return e.theme.backgroundColor}),(function(e){var t=e.theme;return t.axisLines.stroke||(t.gridLines?t.gridLines.stroke:null)}),(function(e){var t=e.theme;return t.gridLines?t.gridLines.strokeWidth:null}),(function(e){return e.theme.gridLines?"auto":"none"}),(function(e){return e.theme.axisText.color}),(function(e){return e.theme.axisText.fontFamily}),(function(e){return e.theme.axisText.fontSize}),(function(e){return e.theme.axisText.fontWeight}),(function(e){return e.theme.axisLines.stroke}),(function(e){return e.theme.viewbox.selectionFill}),(function(e){return e.theme.viewbox.selectionStroke}),(function(e){var t=e.theme;return t.labels.xAxis.color||t.labels.color}),(function(e){var t=e.theme;return t.labels.xAxis.fontWeight||t.labels.fontWeight}),(function(e){var t=e.theme;return t.labels.xAxis.fontSize||t.labels.fontSize}),(function(e){var t=e.theme;return t.labels.xAxis.fontFamily||t.labels.fontFamily}),(function(e){var t=e.theme;return t.labels.yAxis.color||t.labels.color}),(function(e){var t=e.theme;return t.labels.yAxis.fontWeight||t.labels.fontWeight}),(function(e){var t=e.theme;return t.labels.yAxis.fontSize||t.labels.fontSize}),(function(e){var t=e.theme;return t.labels.yAxis.fontFamily||t.labels.fontFamily})),v=n(53),g=n.n(v),y=a.a.createContext({width:window.innerWidth,height:window.innerHeight}),O=y,j=function(e){var t=e.children,n=Object(r.useState)({width:window.innerWidth,height:window.innerHeight}),c=Object(i.a)(n,2),o=c[0],l=c[1];return Object(r.useEffect)((function(){var e=g()((function(){l({width:window.innerWidth,height:window.innerHeight})}),300);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),a.a.createElement(y.Provider,{value:o},t)},E=a.a.createContext(null),k=E,w=function(e){var t=e.children,n=Object(r.useState)("sunsetblue"),c=Object(i.a)(n,2),o=c[0],l=c[1],s=Object(r.useState)(p(d[1])),u=Object(i.a)(s,2),f=u[0],m=u[1];return a.a.createElement(E.Provider,{value:{theme:f,themeName:o,setTheme:function(e){l(e),m(p(e))}}},t)},q=n(37),S=n(4),C=n.n(S),N=n(10),M=n(33),T=n(74),L=n(75),z="localhost",F=!1,A=4848,P="",R="Consumer Sales.qvf",I=T.create({schema:L,url:"ws".concat(F?"s":"","://").concat(z,":").concat(A,"/").concat(P?"".concat(P,"/"):"","app/engineData")});function D(){I.close()}var H=a.a.createContext(null),B=H,W=function(e){var t=e.children,n=Object(r.useState)(null),c=Object(i.a)(n,2),o=c[0],l=c[1],s=Object(r.useState)(!1),u=Object(i.a)(s,2),f=u[0],d=u[1];return Object(r.useEffect)((function(){return new Promise((function(e,t){I.open().then((function(t){t.openDoc(R).then((function(t){e(t)}))})).catch((function(e){t(e)})),I.on("opened",(function(){console.log("session; opened")})),I.on("closed",(function(){console.log("session; closed")})),I.on("suspended",(function(e){console.log("session; suspended",e)})),I.on("resumed",(function(){console.log("session; resumed")})),I.on("notification:*",(function(e,t){return console.log("notification:".concat(e),t)})),I.on("socket-error",(function(e){console.log("socket-error",e)}))})).then((function(e){l(e)})),D}),[]),a.a.createElement(a.a.Fragment,null,o?a.a.createElement(H.Provider,{value:{app:o,computing:f,setComputing:d}},t):a.a.createElement("p",null,"Loading..."))};W.defaultProps={children:null};var X=a.a.createContext(null),Y=X,_=function(e){var t=e.children,n=Object(r.useContext)(B),c=n.app,o=n.computing,l=Object(r.useState)([]),s=Object(i.a)(l,2),u=s[0],f=s[1],d=Object(r.useCallback)((function(e){f((function(t){return[].concat(Object(M.a)(t),[e])}))}),[]),m=Object(r.useCallback)((function(e){var t=u.findIndex((function(t){return t.id===e}));f((function(e){return Object(M.a)(e).splice(t,1)}))}),[u]),b=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.getObject(t);case 3:n=e.sent,e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),console.log(e.t0),new Error("Whoops, couldn't find the requested object with id \"".concat(t,'", in the connected qlik app. Please check the object id and try again'));case 10:return e.next=12,n.getProperties();case 12:return(r=e.sent).qHyperCubeDef.qInitialDataFetch=[{qTop:0,qLeft:0,qWidth:10,qHeight:100}],e.next=16,n.setProperties(r);case 16:return d({id:n.id,type:"cube"}),e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[c,d]),p=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t,n,r){var a,o,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="cube"===e.t0?3:"list"===e.t0?6:"selections"===e.t0?9:12;break;case 3:return a="qHyperCube",o="qHyperCubeDef",e.abrupt("break",15);case 6:return a="qListObject",o="qListObjectDef",e.abrupt("break",15);case 9:return a="CurrentSelections",o="qSelectionObjectDef",e.abrupt("break",15);case 12:return a=null,o=null,e.abrupt("break",15);case 15:return l=a&&o?Object(q.a)({qInfo:{qType:r||a}},o,n||{}):t,e.abrupt("return",c.createSessionObject(l).then((function(e){return d({id:e.id,type:t,ref:r}),e})));case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[c,d]),h=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<20)){e.next=21;break}if(o){e.next=18;break}r=void 0;case 4:if(r){e.next=17;break}return e.prev=5,e.next=8,t.getLayout();case 8:r=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),e.next=15,new Promise((function(e){return setTimeout(e,200)}));case 15:e.next=4;break;case 17:return e.abrupt("return",r);case 18:n++,e.next=1;break;case 21:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),[o]),x=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.destroySessionObject(t);case 2:m(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,m]);return a.a.createElement(X.Provider,{value:{objects:u,createObject:p,getObject:b,getObjectLayout:h,destroyObject:x}},t)};function V(e){var t=["th","st","nd","rd"],n=e%100;return e+(t[(n-20)%10]||t[n]||t[0])}function J(e,t,n){var r=document.createElement("svg"),a=document.createElement("text");a.appendChild(document.createTextNode(e)),a.style.fontSize=t,a.style.fontFamily=n,a.style.visibility="hidden",a.style.whiteSpace="nowrap",r.appendChild(a),document.body.appendChild(r);var c=a.getBoundingClientRect().width;return document.body.removeChild(r),c}var Q=function(e){var t,n;switch(e){case"cube":t="/qHyperCubeDef",n="qHyperCube";break;case"list":t="/qListObjectDef",n="qListObject";break;default:throw new Error("NOT IMPLEMENTED")}return{path:t,object:n}},U=a.a.createContext(null),G=U,$=function(e){var t=e.children,n=Object(r.useContext)(B),c=n.app,o=n.setComputing,s=Object(r.useContext)(Y),u=s.objects,f=s.createObject,d=s.destroyObject,m=Object(r.useState)({selectedModelId:null,selectedModelType:null,isSelecting:!1,values:[]}),b=Object(i.a)(m,2),p=b[0],h=b[1],x=Object(r.useState)(null),v=Object(i.a)(x,2),g=v[0],y=v[1],O=Object(r.useCallback)((function(e){var t=e.id,n=e.type,r=e.values;h((function(e){return Object(l.a)(Object(l.a)({},e),{},{selectedModelId:t,selectedModelType:n,isSelecting:!0,values:r||[]})}))}),[]),j=Object(r.useCallback)((function(){h((function(e){return Object(l.a)(Object(l.a)({},e),{},{selectedModelId:null,selectedModelType:null,isSelecting:!1,values:[]})}))}),[]),E=Object(r.useCallback)((function(e){h((function(t){return Object(l.a)(Object(l.a)({},t),{},{values:e})}))}),[]),k=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.isSelecting,r=p.selectedModelId,n&&r!==t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,c.getObject(r);case 6:return a=e.sent,o(!0),e.next=10,a.endSelections(!0);case 10:o(!1),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",new Error("Couldn't end selections on ".concat(r)));case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),[c,o,p]),w=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t){var n,r,a,l,i,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(t);case 3:if(n=p.selectedModelId,r=u.find((function(e){return e.id===t})),a=r.type,l=Q(a),i=l.path,n===t){e.next=15;break}return e.next=9,c.getObject(t);case 9:return s=e.sent,o(!0),e.next=13,s.beginSelections([i]);case 13:o(!1),O({id:t,type:a});case 15:return e.abrupt("return");case 18:return e.prev=18,e.t0=e.catch(0),e.abrupt("return",new Error("Couldn't begin selections on ".concat(t," - ").concat(e.t0)));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),[c,u,O,o,p,k]),q=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof t){e.next=2;break}throw new Error("'Save changes' boolean parameter is required for endSelections method");case 2:return n=p.selectedModelId,r=p.isSelecting,e.prev=3,e.next=6,c.getObject(n);case 6:if(a=e.sent,r){e.next=9;break}return e.abrupt("return",Promise.resolve("No selections in progress"));case 9:return o(!0),e.next=12,a.endSelections(t);case 12:return o(!1),e.abrupt("return",j());case 16:return e.prev=16,e.t0=e.catch(3),e.abrupt("return",new Error("Couldn't end selections - ".concat(e.t0)));case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}(),[c,j,o,p]),S=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t,n,r){var a,l,i,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=u.find((function(e){return e.id===t})),l=a.type){e.next=4;break}throw new Error("Whoops, specified object not found (ObjectID ".concat(t,")"));case 4:return e.next=6,w(t);case 6:return"undefined"===typeof r&&(r=p.values.length>0&&p.selectedModelId===t),e.next=9,c.getObject(t);case 9:if(i=e.sent,o(!0),"cube"!==l){e.next=16;break}return e.next=14,i.selectHyperCubeValues("/qHyperCubeDef",0,n,r);case 14:e.next=22;break;case 16:if("list"!==l){e.next=21;break}return e.next=19,i.selectListObjectValues("/qListObjectDef",n,r);case 19:e.next=22;break;case 21:return e.abrupt("return",new Error("NOT IMPLEMENTED FOR OBJECT TYPE"+l));case 22:if(o(!1),s=Object(M.a)(p.values),n.forEach((function(e){var t=s.findIndex((function(t){return t===e}));t>-1?s[t]=null:s.push(e)})),s=s.filter((function(e){return null!==e})),E(p.selectedModelId===t?s:n),0!==s.length){e.next=30;break}return e.next=30,q(!1);case 30:return e.abrupt("return",Promise.resolve(p.values));case 33:throw e.prev=33,e.t0=e.catch(0),new Error("Error selecting values - "+e.t0);case 36:case"end":return e.stop()}}),e,null,[[0,33]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[c,w,q,u,o,p.values,E]),T=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.getField(t);case 3:return e.sent.clear(),e.abrupt("return",Promise.resolve("Cleared ".concat(t," selections")));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",new Error("Error clearing field selections",e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[c]);return Object(r.useEffect)((function(){return f("selections").then((function(e){y(e.id)})),function(){g&&d(g)}}),[]),a.a.createElement(a.a.Fragment,null,g?a.a.createElement(U.Provider,{value:{selections:p,beginSelections:w,selectValues:S,endSelections:q,clearFieldSelections:T}},t):a.a.createElement("p",null,"Loading"))},K=n(42);function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ee(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var te=a.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),ne=a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),re=function(e){var t=e.svgRef,n=e.title,r=ee(e,["svgRef","title"]);return a.a.createElement("svg",Z({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),n?a.a.createElement("title",null,n):null,te,ne)},ae=a.a.forwardRef((function(e,t){return a.a.createElement(re,Z({svgRef:t},e))}));n.p;function ce(){return(ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function oe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var le=a.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),ie=a.a.createElement("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),se=function(e){var t=e.svgRef,n=e.title,r=oe(e,["svgRef","title"]);return a.a.createElement("svg",ce({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),n?a.a.createElement("title",null,n):null,le,ie)},ue=a.a.forwardRef((function(e,t){return a.a.createElement(se,ce({svgRef:t},e))}));n.p;function fe(){var e=Object(s.a)(["\n  background-color:  #00dc00;\n  .MuiSvgIcon-root {\n    fill: #fff !important;\n  }\n"]);return fe=function(){return e},e}function de(){var e=Object(s.a)(["\n  background-color: red;\n  .MuiSvgIcon-root {\n    fill: #fff !important;\n  }\n"]);return de=function(){return e},e}function me(){var e=Object(s.a)(['\n  border: none;\n  border-radius: 3px;\n  margin: auto 3px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  height: 30px;\n  background-color: transparent;\n  position: relative;\n  outline: none;\n  &:hover::after {\n    position: absolute;\n    content: "";\n    left: 0; right: 0; top: 0; bottom: 0;\n    background-color: rgba(0,0,0,0.05)\n  }\n  cursor: pointer;\n  svg {\n    fill: #666;\n  }\n  &:active svg {\n    fill: #333;\n  }\n']);return me=function(){return e},e}var be=u.b.button(me()),pe=be,he=Object(u.b)(be)(de()),xe=Object(u.b)(be)(fe()),ve=n(54),ge=n.n(ve),ye=function(e){return e.measures[0].value},Oe=function(e){return e.measures[1].value},je=function(e){return e.measures[2]?e.measures[2].value:5};var Ee=function(e){var t=e.data,n=e.width,c=e.height,o=e.onDimensionClick,l=e.selections,s=e.title,u=e.dotSizeRange,d=e.theme,m=e.xTickFormat,b=e.yTickFormat,p=e.xTickCount,h=e.yTickCount,x=e.TooltipComponent,v=Object(r.useRef)(),g=Object(r.useRef)();u=u||[4,8];var y=Object(r.useState)(0),O=Object(i.a)(y,2),j=O[0],E=O[1],k=Object(r.useState)(0),w=Object(i.a)(k,2),q=w[0],S=w[1],C=Object(r.useState)({x:null,y:null}),N=Object(i.a)(C,2),M=N[0],T=N[1],L=Object(r.useState)(null),z=Object(i.a)(L,2),F=z[0],A=z[1],P=t[0].measures[0].label,R=t[0].measures[1].label,I={left:R?100:60,right:30,top:s?50:15,bottom:P?70:35};return Object(r.useEffect)((function(){A((function(e){return ge()(e,t)?e:t}))}),[t]),Object(r.useEffect)((function(){E(n-(I.left+I.right)),S(c-(I.top+I.bottom))}),[n,c,I]),Object(r.useEffect)((function(){T({x:f.scaleLinear(),y:f.scaleLinear()})}),[]),Object(r.useEffect)((function(){F&&M.x&&(M.x.domain([0,1]),M.y.domain([0,f.max(F,(function(e){return Oe(e)}))]).nice())}),[F,M]),Object(r.useEffect)((function(){j&&q&&(M.x.range([0,j]),M.y.range([q,0]))}),[M,j,q]),Object(r.useEffect)((function(){if(M.y){var e=f.select(v.current).select(".inner-box"),t=je(F[0])?f.scaleLinear().domain(f.extent(F.map((function(e){return je(e)})))).range([u[0],u[1]]):function(){return.4*(u[0]+u[1])},n=d.colorScales.sequential(f.extent(F.map((function(e){return je(e)})))),r=e.select(".points").selectAll("circle").data(F);r.enter().append("circle").attr("cx",(function(e){return M.x(ye(e))})).attr("cy",q).style("opacity",0).merge(r).transition().duration(800).attr("class","point").attr("cx",(function(e){return M.x(ye(e))})).attr("cy",(function(e){return M.y(Oe(e))})).attr("r",(function(e){return l.includes(e.qElemNumber)?1.15*t(je(e)):t(je(e))})).style("fill",(function(e){return n(je(e))})).style("opacity",(function(e){return l.includes(e.qElemNumber)?1:.75})).style("stroke",(function(e){return l.includes(e.qElemNumber)?d.selectionHighlight:null})).style("stroke-width",u[0]/4+"px"),r.exit().transition().duration(600).style("opacity",0).attr("cy",q).remove();var a=f.select(g.current),c=e.select(".points").selectAll("circle");c.on("mouseover",(function(e){a.select(".title").text(e.dimensions[0].value),a.select(".content").text(""),e.measures.forEach((function(e){a.select(".content").append("span").attr("class","measure").html("<span>".concat(e.label,"</span>&nbsp;&nbsp;&nbsp;<strong>").concat(e.format(e.value),"</strong>"))})),a.style("opacity",1),f.select(this).attr("r",1.15*t(je(e))).style("opacity",null)})),c.on("mousemove",(function(e){a.style("transform","translateX(calc(".concat(I.left+M.x(ye(e)),"px - 50%)) translateY(calc(").concat(M.y(Oe(e)),"px - 110%))"))})),c.on("mouseout",(function(e){a.style("opacity",0),f.select(this).attr("r",l.includes(e.qElemNumber)?1.15*t(je(e)):t(je(e))).style("stroke",l.includes(e.qElemNumber)?d.selectionHighlight:null).style("opacity",l.includes(e.qElemNumber)?1:.75)})),c.on("click",(function(e){o(e)}))}}),[M,j,q,F,o,l,u,d,I]),Object(r.useEffect)((function(){if(M.y){var e=f.select(v.current).select(".inner-box"),t=f.axisBottom(M.x).tickSize(-q);t.tickFormat(F[0].measures[0].format),p&&t.ticks(p),e.select(".x.axis").call(t).transition().duration(400).attr("transform","translate(0,".concat(q,")")).selectAll("text").attr("transform","translate(0, 5)");var n=f.axisLeft(M.y).tickSize(-j);n.tickFormat(F[0].measures[1].format),h&&n.ticks(h),e.select(".y.axis").call(n).style("opacity",0).transition().duration(400).style("opacity",1).selectAll("text").attr("transform","translate(-5, 0)"),e.select(".y.axis").enter(),e.selectAll(".axis .tick:nth-of-type(1) line").style("stroke",d.axisLines.stroke),e.selectAll(".axis text").style("fill",d.axisText.color),e.selectAll(".axis .domain").style("display","none"),e.selectAll(".axis .tick:not(:nth-of-type(1)) line").attr("stroke",d.gridLines?d.gridLines.stroke:null).attr("stroke-width",d.gridLines?d.gridLines.strokeWidth:null).style("display",d.gridLines?"auto":"none")}}),[F,j,q,M,d,p,m,h,b]),a.a.createElement(a.a.Fragment,null,a.a.createElement("svg",{ref:v,width:n,height:c},a.a.createElement("g",{className:"inner-box",pointerEvents:"all",transform:"translate(".concat(I.left,", ").concat(I.top,")")},a.a.createElement("g",{className:"x axis"}),a.a.createElement("g",{className:"y axis"}),a.a.createElement("g",{className:"points"}),a.a.createElement("text",{className:"x-axis-label",transform:"translate(".concat(j/2,", ").concat(q+I.bottom/2+10,")"),textAnchor:"middle"},P),a.a.createElement("text",{className:"y-axis-label",transform:"translate(".concat(-60,", ").concat(q/2,") rotate(-90)"),textAnchor:"middle"},R)),a.a.createElement("text",{className:"chart-title",fill:"#000",transform:"translate(".concat(n/2,", ").concat(I.top/2+3,")"),textAnchor:"middle"},s)),a.a.createElement(x,{ref:g}))},ke=n(49).lasso,we=function(e){return e.dimensions[0].value},qe=function(e){return e.measures[0].value};var Se=function(e){var t=e.theme,n=e.lassoActive,c=e.hasLasso,o=e.data,s=e.width,u=e.height,d=e.selections,m=e.onDimensionClick,b=e.chartTitle,p=e.viewbox,h=(e.yTickFormat,e.xTickFormat),x=e.xTickCount,v=e.yTickCount,g=e.TooltipComponent,y=Object(r.useState)([]),O=Object(i.a)(y,2),j=O[0],E=O[1],k=Object(r.useRef)(),w=Object(r.useRef)(n),q=Object(r.useRef)(),S=Object(r.useState)(0),C=Object(i.a)(S,2),N=C[0],M=C[1],T=Object(r.useState)(0),L=Object(i.a)(T,2),z=L[0],F=L[1],A=Object(r.useState)(0),P=Object(i.a)(A,2),R=P[0],I=P[1],D=Object(r.useState)({x:null,y:null,boxY:null,boxX:null}),H=Object(i.a)(D,2),B=H[0],W=H[1],X=Object(r.useState)(!1),Y=Object(i.a)(X,2),_=Y[0],V=Y[1],Q=o[0].dimensions[0].label,U=o[0].measures[0].label,G=Object(r.useState)({top:30,right:U?Math.min(Math.max(.07*s,40),80):Math.min(Math.max(.05*s,30),60),middle:0,left:U?Math.min(Math.max(.1*s,80),130):Math.min(Math.max(.05*s,30),60),bottom:20}),$=Object(i.a)(G,2),K=$[0],Z=$[1],ee=!1===p?1:Math.max(1,23/(R/j.length));Object(r.useEffect)((function(){o.length>0&&E(o)}),[o]);var te=Object(r.useCallback)((function(){return f.select(k.current)}),[]);return Object(r.useEffect)((function(){var e=J(o.map(we).reduce((function(e,t){return t.length>e.length?t:e}),we(o[0])),t.axisText.fontSize,t.axisText.fontFamily);e=Math.sqrt(Math.pow(e,2)/2),Z((function(t){return Object(l.a)(Object(l.a)({},t),{},{middle:e+(Q?60:20)})}))}),[s,u,te,o,t,Q]),Object(r.useEffect)((function(){if(K.middle){var e=s-(K.left+K.right);I(e);var t=ee>1?K.top+K.middle+K.bottom:K.top+K.middle,n=u-t,r=ee>1?.175*n:0;M(n-r),F(r),V(!0)}}),[s,u,te,K,ee]),Object(r.useEffect)((function(){var e=f.scaleBand().range([0,R]).padding(.35),t=f.scaleBand().range([0,R]).padding(.35),n=f.scaleLinear().range([N,0]),r=f.scaleLinear().range([z,0]);W({x:e,y:n,boxY:r,boxX:t})}),[R,N,z]),Object(r.useEffect)((function(){if(_){var e=f.select(k.current).select(".inner-box"),n=j,r=B.x,a=B.y,o=B.boxY,l=B.boxX;r.domain(n.map(we)),l.domain(r.domain()),a.domain([0,f.max(n,(function(e){return qe(e)}))]).nice(),o.domain([0,f.max(n,(function(e){return qe(e)}))]).nice();var i=e.select(".bars").selectAll("rect").data(n),s=e.select(".viewbox.bars").selectAll("rect").data(n),u=e.selectAll(".bars").selectAll("rect").data(n),b={lower:f.quantile(n,.05,(function(e){return qe(e)})),upper:f.quantile(n,.9,(function(e){return qe(e)}))},p=[[0,K.top],[R,N]],h=f.zoom().scaleExtent([1,8]).translateExtent(p).extent(p).filter((function(){return!f.event.wheelDelta})),x=t.colorScales.sequential([b.upper,b.lower]),v=function(e){return d.includes(e.qElemNumber)?1:.75},g=function(e){return e[0].parentNode.matches(".viewbox")},y=function(e){return N-a(qe(e))>0?N-a(qe(e)):0},O=f.brushX().extent([[0,N+K.middle],[R,N+K.middle+z]]).on("brush end",(function(){if(!f.event.sourceEvent||"zoom"!==f.event.sourceEvent.type){var t=f.event.selection||l.range();r.range([0,R*ee].map((function(e){return e-t[0]*ee}))),i.attr("width",r.bandwidth()).attr("height",y).attr("x",(function(e){return r(we(e))})).style("opacity",v),s.attr("opacity",(function(e){return l(we(e))>t[0]&&l(we(e))+l.bandwidth()<t[1]?1:.7})),e.select(".x.axis").call(f.axisBottom(r))}}));e.select(".brush").call(O).call(O.move,l.range()).selectAll(".handle, .overlay").attr("pointer-events","none");w.current?h.on("zoom",null):h.on("zoom",(function(){if(!f.event.sourceEvent||"brush"!==f.event.sourceEvent.type){f.event.transform.k=ee,r.range([0,R].map((function(e){return f.event.transform.applyX(e)}))),i.attr("width",r.bandwidth()).attr("height",y).attr("x",(function(e){return r(we(e))})).style("opacity",v),e.select(".x.axis").call(f.axisBottom(r)).selectAll("text").attr("transform","rotate(-45) translate(-10, -6)");var t=f.event.transform;e.select(".brush").call(O.move,l.range().map(t.invertX,t))}})),e.call(h),f.zoomTransform(e).k!==ee&&h.scaleTo(e,ee,[0,0]);u.enter().append("rect").merge(u).transition().duration(250).attr("class","bar").attr("width",(function(e,t,n){return g(n)?l.bandwidth():r.bandwidth()})).attr("height",(function(e,t,n){return g(n)?function(e){return z-o(qe(e))>0?z-o(qe(e)):0}(e):y(e)})).attr("x",(function(e,t,n){return g(n)?l(we(e)):r(we(e))})).attr("y",(function(e,t,n){return g(n)?o(qe(e)):a(qe(e))})).attr("fill",(function(e){return x(qe(e))})).attr("stroke",(function(e){return d&&d.includes(e.qElemNumber)?t.selectionHighlight:"none"})).attr("stroke-width",1).attr("clip-path","url(#inner-clip)"),u.exit().transition().duration(250).attr("x",-r.bandwidth()-10).style("opacity",0).remove();if(0===e.select(".lasso").nodes().length&&c){var E=ke(f).closePathSelect(!0).closePathDistance(100).items(i.data(n)).targetArea(e);E.on("start",(function(){w.current&&E.items().attr("r",3.5).classed("not_possible",!0).classed("selected",!1)})),E.on("draw",(function(){w.current&&(E.possibleItems().classed("not_possible",!1).classed("possible",!0),E.notPossibleItems().classed("not_possible",!0).classed("possible",!1))})),E.on("end",(function e(){if(w.current){E.items().classed("not_possible",!1).classed("possible",!1);var t=[];E.selectedItems().each((function(e){return t.push(e.qElemNumber)})),e(),E.notSelectedItems()}})),e.call(E)}var S=f.select(q.current);i.on("mouseover",(function(e){f.select(this).style("opacity",1),S.select(".title").text(e.dimensions[0].value),S.select(".content").text(""),e.measures.forEach((function(e){S.select(".content").append("span").attr("class","measure").html("<span>".concat(e.label,"</span>&nbsp;&nbsp;&nbsp;<strong>").concat(e.format(e.value),"</strong>"))})),S.style("opacity",1)})).on("mousemove",(function(e){S.style("transform","translateX(calc(".concat(K.left+r(we(e))+r.bandwidth()/2,"px - 50%)) translateY(").concat(a(qe(e))-30,"px)"))})).on("mouseout",(function(e){S.style("opacity",0),f.select(this).transition("restoreBarColor").duration(150).style("opacity",v)})).on("click",(function(e){m(e)}))}}),[j,B,R,N,z,m,w,d,t,te,c,K,_,ee]),Object(r.useEffect)((function(){if(B.y){var e=f.select(k.current),t=f.axisLeft(B.y);t.tickFormat(j[0].measures[0].format),v&&t.ticks(v),e.select(".y.axis").call(t).transition().duration(300);var n=f.axisBottom(B.x);h&&n.tickFormat(h),x&&n.ticks(x),e.select(".x.axis").call(n).transition().duration(300).attr("transform","translate(0,".concat(N,")")).attr("clip-path","url(#outer-clip)").selectAll("text").attr("transform","rotate(-45) translate(-10, -6)").style("text-anchor","end").attr("dx","6").attr("dy","4"),e.select(".x.axis").selectAll(".domain, .tick line").attr("clip-path","url(#inner-clip)"),e.select(".chart-title").attr("transform","translate(".concat(R/2,", -35)")).style("text-anchor","middle").style("font-size","25px").style("font-weight","bold")}})),a.a.createElement(a.a.Fragment,null,a.a.createElement("svg",{ref:k,width:s,height:u},a.a.createElement("text",{className:"chart-title",fill:"#fff"},b),a.a.createElement("text",{transform:"translate(".concat(R/2+K.left,", ").concat(N+K.middle,")"),className:"x-axis-label",textAnchor:"middle"},Q),a.a.createElement("text",{className:"y-axis-label",transform:"translate(".concat(.5*K.left-(t.labels.xAxis.fontSize||t.labels.fontSize).replace(/\D/g,""),", ").concat(N/2+K.top,") rotate(-90)"),textAnchor:"middle"},U),a.a.createElement("g",{className:"inner-box",pointerEvents:"all",transform:"translate(".concat(K.left,", ").concat(K.top,")")},a.a.createElement("rect",{className:"zoom-sensor",transform:"translate(0, -".concat(K.top,")"),width:R,height:u,style:{fill:"none"},pointerEvents:"all"}),a.a.createElement("g",{className:"bars"}),a.a.createElement("g",{className:"x axis"}),a.a.createElement("g",{className:"y axis"}),1!==ee?a.a.createElement(a.a.Fragment,null,a.a.createElement("g",{className:"viewbox",transform:"translate(0, ".concat(N+K.middle,")"),pointerEvents:"none"},a.a.createElement("rect",{fill:t.viewbox.backgroundFill,width:R,height:z}),a.a.createElement("g",{className:"viewbox bars"})),a.a.createElement("g",{className:"brush"})):a.a.createElement(a.a.Fragment,null),a.a.createElement("clipPath",{id:"inner-clip"},a.a.createElement("rect",{transform:"translate(0, -".concat(K.top,")"),width:R,height:u})),a.a.createElement("clipPath",{id:"outer-clip"},a.a.createElement("rect",{transform:"translate(-8, -".concat(K.top,")"),width:R+8,height:u})))),a.a.createElement(g,{ref:q}))},Ce=n(49).lasso,Ne=function(e){return e.dimensions[0].value},Me=function(e){return e.measures[0].value};var Te=function(e){var t=e.theme,n=e.lassoActive,c=e.hasLasso,o=e.data,s=e.width,u=e.height,d=e.selections,m=e.onDimensionClick,b=e.chartTitle,p=e.viewbox,h=(e.yTickFormat,e.xTickFormat),x=e.xTickCount,v=e.yTickCount,g=e.TooltipComponent,y=Object(r.useState)([]),O=Object(i.a)(y,2),j=O[0],E=O[1],k=Object(r.useRef)(),w=Object(r.useRef)(n),q=Object(r.useRef)(),S=Object(r.useState)(0),C=Object(i.a)(S,2),N=C[0],M=C[1],T=Object(r.useState)(0),L=Object(i.a)(T,2),z=L[0],F=L[1],A=Object(r.useState)(0),P=Object(i.a)(A,2),R=P[0],I=P[1],D=Object(r.useState)({x:null,y:null,boxY:null,boxX:null}),H=Object(i.a)(D,2),B=H[0],W=H[1],X=Object(r.useState)(!1),Y=Object(i.a)(X,2),_=Y[0],V=Y[1],Q=o[0].dimensions[0].label,U=o[0].measures[0].label,G=Object(r.useState)({top:30,right:U?Math.min(Math.max(.07*s,40),80):Math.min(Math.max(.05*s,30),60),middle:0,left:U?Math.min(Math.max(.1*s,80),130):Math.min(Math.max(.05*s,30),60),bottom:20}),$=Object(i.a)(G,2),K=$[0],Z=$[1],ee=!1===p?1:Math.max(1,23/(R/j.length));Object(r.useEffect)((function(){o.length>0&&E(o.sort((function(e,t){return e.dimensions[0].value-t.dimensions[0].value})))}),[o]);var te=Object(r.useCallback)((function(){return f.select(k.current)}),[]);return Object(r.useEffect)((function(){var e=J(o.map(Ne).reduce((function(e,t){return t.length>e.length?t:e}),Ne(o[0])),t.axisText.fontSize,t.axisText.fontFamily);e=Math.sqrt(Math.pow(e,2)/2),Z((function(t){return Object(l.a)(Object(l.a)({},t),{},{middle:e+(Q?60:20)})}))}),[s,u,te,o,t,Q]),Object(r.useEffect)((function(){if(K.middle){var e=s-(K.left+K.right);I(e);var t=ee>1?K.top+K.middle+K.bottom:K.top+K.middle,n=u-t,r=ee>1?.175*n:0;M(n-r),F(r),V(!0)}}),[s,u,te,K,ee]),Object(r.useEffect)((function(){var e=f.scaleLinear().range([0,R]),t=f.scaleBand().range([0,R]).padding(.35),n=f.scaleLinear().range([N,0]),r=f.scaleLinear().range([z,0]);W({x:e,y:n,boxY:r,boxX:t})}),[R,N,z]),Object(r.useEffect)((function(){if(_){var e=f.select(k.current).select(".inner-box"),n=j,r=B.x,a=B.y,o=B.boxY,l=B.boxX;r.domain(f.extent(n,(function(e){return Ne(e)}))).nice(),l.domain(r.domain());a.domain(function(e,t){var n=Object(i.a)(e,2),r=n[0],a=n[1],c=(a-r)*t/2;return[r-c,a+c]}(f.extent(n,(function(e){return Me(e)})),.7)).nice(),o.domain(a.domain());var s=e.select(".bars").selectAll("circle").data(n),u=e.select(".viewbox.bars").selectAll("circle").data(n),b=e.selectAll(".bars").selectAll("circle").data(n),p={lower:f.quantile(n,.05,(function(e){return Me(e)})),upper:f.quantile(n,.9,(function(e){return Me(e)}))},h=[[0,K.top],[R,N]],x=f.zoom().scaleExtent([1,8]).translateExtent(h).extent(h).filter((function(){return!f.event.wheelDelta})),v=t.colorScales.sequential([p.lower,p.upper]),g=function(e){return d.includes(e.qElemNumber)?1:.75},y=function(e){return e[0].parentNode.matches(".viewbox")},O=f.brushX().extent([[0,N+K.middle],[R,N+K.middle+z]]).on("brush end",(function(){if(!f.event.sourceEvent||"zoom"!==f.event.sourceEvent.type){var t=f.event.selection||l.range();r.range([0,R*ee].map((function(e){return e-t[0]*ee}))),s.attr("cx",(function(e,t,n){return y(n)?l(Ne(e)):r(Ne(e))})).style("opacity",g),u.attr("opacity",(function(e){return l(Ne(e))>t[0]&&l(Ne(e))<t[1]?1:.7})),e.select(".x.axis").call(f.axisBottom(r)),e.select(".line").transition().duration(500).attr("d",f.line().x((function(e){return r(Ne(e))})).y((function(e){return a(Me(e))})))}}));e.select(".brush").call(O).call(O.move,l.range()).selectAll(".handle, .overlay").attr("pointer-events","none");w.current?x.on("zoom",null):x.on("zoom",(function(){if(!f.event.sourceEvent||"brush"!==f.event.sourceEvent.type){f.event.transform.k=ee,r.range([0,R].map((function(e){return f.event.transform.applyX(e)}))),s.attr("cx",(function(e,t,n){return y(n)?l(Ne(e)):r(Ne(e))})).style("opacity",g),e.select(".x.axis").call(f.axisBottom(r)).selectAll("text").attr("transform","rotate(-45) translate(-10, -6)");var t=f.event.transform;e.select(".brush").call(O.move,l.range().map(t.invertX,t)),e.select(".line").transition().duration(500).attr("d",f.line().x((function(e){return r(Ne(e))})).y((function(e){return a(Me(e))})))}})),e.call(x),f.zoomTransform(e).k!==ee&&x.scaleTo(e,ee,[0,0]);b.enter().append("circle").merge(b).transition().duration(250).attr("class","bar").attr("r",(function(e,t,n){return y(n)?1:3})).attr("cx",(function(e,t,n){return y(n)?l(Ne(e)):r(Ne(e))})).attr("cy",(function(e,t,n){return y(n)?o(Me(e)):a(Me(e))})).attr("fill",(function(e){return v(f.max(n,Me))})).attr("stroke",(function(e){return d&&d.includes(e.qElemNumber)?t.selectionHighlight:"none"})).attr("stroke-width",1).attr("clip-path","url(#inner-clip)"),b.exit().transition().duration(250).attr("x",-13).style("opacity",0).remove(),e.select(".line").datum(n).transition().duration(500).attr("d",f.line().x((function(e){return r(Ne(e))})).y((function(e){return a(Me(e))}))).attr("fill","none").attr("stroke",v(f.median(n,Me))).attr("stroke-width",1.3);if(0===e.select(".lasso").nodes().length&&c){var E=Ce(f).closePathSelect(!0).closePathDistance(100).items(s.data(n)).targetArea(e);E.on("start",(function(){w.current&&E.items().attr("r",3.5).classed("not_possible",!0).classed("selected",!1)})),E.on("draw",(function(){w.current&&(E.possibleItems().classed("not_possible",!1).classed("possible",!0),E.notPossibleItems().classed("not_possible",!0).classed("possible",!1))})),E.on("end",(function e(){if(w.current){E.items().classed("not_possible",!1).classed("possible",!1);var t=[];E.selectedItems().each((function(e){return t.push(e.qElemNumber)})),e(),E.notSelectedItems()}})),e.call(E)}var S=f.select(q.current);s.on("mouseover",(function(e){f.select(this).style("opacity",1),S.select(".title").text(e.dimensions[0].value),S.select(".content").text(""),e.measures.forEach((function(e){S.select(".content").append("span").attr("class","measure").html("<span>".concat(e.label,"</span>&nbsp;&nbsp;&nbsp;<strong>").concat(e.format(e.value),"</strong>"))})),S.style("opacity",1)})).on("mousemove",(function(e){S.style("transform","translateX(calc(".concat(K.left+r(Ne(e)),"px - 50%)) translateY(").concat(a(Me(e))-30,"px)"))})).on("mouseout",(function(e){S.style("opacity",0),f.select(this).transition("restoreBarColor").duration(150).style("opacity",g)})).on("click",(function(e){m(e)}))}}),[j,B,R,N,z,m,w,d,t,te,c,K,_,ee]),Object(r.useEffect)((function(){if(B.y){var e=f.select(k.current),t=f.axisLeft(B.y);t.tickFormat(j[0].measures[0].format),v&&t.ticks(v),e.select(".y.axis").call(t).transition().duration(300);var n=f.axisBottom(B.x);h&&n.tickFormat(h),x&&n.ticks(x),e.select(".x.axis").call(n).transition().duration(300).attr("transform","translate(0,".concat(N,")")).attr("clip-path","url(#outer-clip)").selectAll("text").attr("transform","rotate(-45) translate(-10, -6)").style("text-anchor","end").attr("dx","6").attr("dy","4"),e.select(".x.axis").selectAll(".domain, .tick line").attr("clip-path","url(#inner-clip)"),e.select(".chart-title").attr("transform","translate(".concat(R/2,", -35)")).style("text-anchor","middle").style("font-size","25px").style("font-weight","bold")}})),a.a.createElement(a.a.Fragment,null,a.a.createElement("svg",{ref:k,width:s,height:u},a.a.createElement("text",{className:"chart-title",fill:"#fff"},b),a.a.createElement("text",{transform:"translate(".concat(R/2+K.left,", ").concat(N+K.middle,")"),className:"x-axis-label",textAnchor:"middle"},Q),a.a.createElement("text",{className:"y-axis-label",transform:"translate(".concat(.5*K.left-(t.labels.xAxis.fontSize||t.labels.fontSize).replace(/\D/g,""),", ").concat(N/2+K.top,") rotate(-90)"),textAnchor:"middle"},U),a.a.createElement("g",{className:"inner-box",pointerEvents:"all",transform:"translate(".concat(K.left,", ").concat(K.top,")")},a.a.createElement("rect",{className:"zoom-sensor",transform:"translate(0, -".concat(K.top,")"),width:R,height:u,style:{fill:"none"},pointerEvents:"all"}),a.a.createElement("path",{className:"line",clipPath:"url(#inner-clip)"}),a.a.createElement("g",{className:"bars"}),a.a.createElement("g",{className:"x axis"}),a.a.createElement("g",{className:"y axis"}),1!==ee?a.a.createElement(a.a.Fragment,null,a.a.createElement("g",{className:"viewbox",transform:"translate(0, ".concat(N+K.middle,")"),pointerEvents:"none"},a.a.createElement("rect",{fill:t.viewbox.backgroundFill,width:R,height:z}),a.a.createElement("g",{className:"viewbox bars"})),a.a.createElement("g",{className:"brush"})):a.a.createElement(a.a.Fragment,null),a.a.createElement("clipPath",{id:"inner-clip"},a.a.createElement("rect",{transform:"translate(0, -".concat(K.top,")"),width:R,height:u})),a.a.createElement("clipPath",{id:"outer-clip"},a.a.createElement("rect",{transform:"translate(-8, -".concat(K.top,")"),width:R+8,height:u})))),a.a.createElement(g,{ref:q}))},Le=0,ze=0,Fe=function(e){return e.dimensions[0].value},Ae=function(e){return e.measures[0].value};function Pe(){var e=Object(s.a)(["\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  opacity: ",';\n  padding: 6px 16px 7px 16px;\n  font-size: 0.8em;\n  background-color: rgba(30,30,30,0.65);\n  color: #fff;\n  border-radius: 3px;\n  &::after {\n    content: "";\n    position: absolute;\n    top: 100%;\n    opacity: 1;\n    left: 50%;\n    transform: translateX(-50%);\n    border-width: 9px;\n    border-color: rgba(30,30,30,0.85) transparent transparent transparent;\n    border-style: solid;\n  }\n  .title {\n    font-size: 0.8em;\n    font-weight: 600;\n    display: block;\n    margin-bottom: 5px;\n  }\n  .subtitle {\n    font-size: 0.8em;\n    color: #777;\n  }\n  .content {\n    font-size: 0.7em;\n    line-height: 1.4;\n    .measure {\n      display: flex;\n      justify-content: space-between;\n      strong {\n        font-weight: 500;\n      }\n    }\n  }\n']);return Pe=function(){return e},e}var Re=u.b.div(Pe(),(function(e){return e.show?1:0})),Ie=a.a.forwardRef((function(e,t){return a.a.createElement(Re,{className:"tooltip",ref:t},a.a.createElement("span",{className:"title"},a.a.createElement("span",{className:"subtitle"})),a.a.createElement("div",{className:"content"}))}));function De(){var e=Object(s.a)(["\n  padding: 4px 8px;\n  border-radius: 5px;\n  z-index: 3;\n  position: absolute;\n  right: 0;\n  top: 6px;\n  display: flex;\n  background-color: ",";\n  svg {\n    fill: #fff !important;\n  }\n"]);return De=function(){return e},e}function He(){var e=Object(s.a)(["\n  margin-bottom: 30px;\n  border: 1px solid transparent;\n  border-radius: 5px;\n  position: relative;\n"]);return He=function(){return e},e}var Be={barchart:Se,scatterplot:Ee,linechart:Te,piechart:function(e){var t=e.width,n=e.height,c=e.data,o=e.theme,s=e.TooltipComponent,u=e.onDimensionClick,d=e.selections,m=Object(r.useRef)(),b=Object(r.useRef)(),p=Object(r.useState)(0),h=Object(i.a)(p,2),x=h[0],v=h[1];return Object(r.useEffect)((function(){if(c&&c.length>0){var e={lower:f.quantile(c,.05,(function(e){return Ae(e)})),upper:f.quantile(c,.9,(function(e){return Ae(e)}))},r=o.colorScales.sequential([e.upper,e.lower]),a=f.select(m.current).select("g"),i=f.pie().padAngle(.01).value((function(e){return Ae(e)}))(c);i=i.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{startAngle:e.startAngle+x,endAngle:e.endAngle+x})}));var s=a.select(".paths").selectAll("path").data(i),p=Math.min(t,n)/2,h=function(e){return f.arc().innerRadius(.7*e).outerRadius(e-1)},v=h(p),g=h(.68*p);s.attr("d",(function(e){return g(e)})).attr("stroke",(function(e){return d.includes(e.data.qElemNumber)?o.selectionHighlight:"transparent"}));var y=function(e){return d.includes(e.data.qElemNumber)?1:.8};s.enter().append("path").attr("d",(function(e){return g(e)})).attr("fill",(function(e){return r(e.value)})).attr("stroke",(function(e){return d.includes(e.data.qElemNumber)?"#fff":"transparent"})).attr("opacity",y).append("text").text((function(e){return e.value})).attr("transform",(function(e){return"translate(".concat(g.centroid(e),")")})),s.exit().remove(),a.selectAll(".labels g").remove();var O=a.select(".labels").selectAll("g").data(i),j=function(e){return Math.abs(v.centroid(e)[1])<.7*p?1:0};O.enter().append("g").call((function(e){return e.append("text").text((function(e){return Fe(e.data)})).attr("font-size",8).attr("fill",o.axisText.color).attr("opacity",j).attr("transform",(function(e){return"translate(".concat(v.centroid(e),")")})).attr("text-anchor",(function(e){return v.centroid(e)[0]>0?"start":"end"}))})).call((function(e){return e.append("line").attr("x1",(function(e){return h(.83*p).centroid(e)[0]})).attr("y1",(function(e){return h(.83*p).centroid(e)[1]})).attr("x2",(function(e){return h(.95*p).centroid(e)[0]})).attr("y2",(function(e){return h(.95*p).centroid(e)[1]})).attr("opacity",j).attr("stroke",o.axisText.color).attr("stroke-width",.8)}));var E=f.select(b.current);s.on("mouseover",(function(e){f.select(this).style("opacity",1),E.select(".title").text(Fe(e.data)),E.select(".content").text(""),E.select(".content").append("span").attr("class","measure").html("<span>".concat(Fe(e.data),"</span>&nbsp;&nbsp;&nbsp;<strong>").concat(Math.round(e.value),"</strong>")),E.style("opacity",1)})).on("mousemove",(function(e){var r=g.centroid(e);E.style("transform","translateX(calc(".concat(r[0]+t/2,"px - 50%)) translateY(calc(").concat(r[1]+n/2-30,"px - 50%))"))})).on("mouseout",(function(e){E.style("opacity",0),f.select(this).transition("restoreBarColor").duration(150).style("opacity",y)})).on("click",(function(e){u(e.data)}))}}),[c,x,d,n,o,u,t]),a.a.createElement(a.a.Fragment,null,a.a.createElement("svg",{ref:m,width:t,height:n,onWheel:function(e){var t=e.deltaY;v((function(e){return e+.1*Math.sign(t)})),f.select(b.current).style("opacity",0)}},a.a.createElement("g",{transform:"translate(".concat(Le+t/2,", ").concat(ze+n/2,")")},a.a.createElement("g",{className:"paths"}),a.a.createElement("g",{className:"labels"}))),a.a.createElement(s,{ref:b}))}},We=u.b.div(He()),Xe=u.b.div(De(),(function(e){return e.theme.backgroundColor}));var Ye=function(e){var t=e.objectId,n=e.dimensions,c=e.measures,o=e.title,s=e.xLabel,f=e.yLabel,d=e.theme,m=e.viewbox,b=e.type,h=e.xTickFormat,v=e.yTickFormat,g=e.xTickCount,y=e.yTickCount,j=e.height,E=function(e){var t=Object(r.useContext)(B).app;return{dimMeasureCheck:Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(n,r,a){var c,o,l,s,u,f,d,m,b,p,h,x,v;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Object(K.a)(n.entries()),e.prev=1,c.s();case 3:if((o=c.n()).done){e.next=16;break}return l=Object(i.a)(o.value,2),s=l[0],u=l[1],f=u.field||u,e.prev=6,e.next=9,t.getField(f);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(6),new Error("The field '".concat(f,"', passed as the ").concat(V(s+1)," dimension to a ").concat(a," component was not found in the connected Qlik app. Please check that the value has been passed correctly, and that it is a field not a master dimension."));case 14:e.next=3;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(1),c.e(e.t1);case 21:return e.prev=21,c.f(),e.finish(21);case 24:d=Object(K.a)(r.entries()),e.prev=25,d.s();case 27:if((m=d.n()).done){e.next=40;break}return b=Object(i.a)(m.value,2),p=b[0],h=b[1],x=h.formula||h,e.next=32,t.checkExpression(x);case 32:if(!(v=e.sent).qErrorMsg){e.next=35;break}throw new Error("The measure '".concat(x,"', passed as the ").concat(V(p+1)," measure to a ").concat(a," component was flagged as having invalid syntax by the connected Qlik app.\n  Please check your expression syntax and ensure there are no typos"));case 35:if(!(v.qBadFieldNames.length>0)){e.next=37;break}throw new Error("The measure '".concat(x,"', passed as the ").concat(V(p+1)," measure to a ").concat(a," component was flagged by the connected Qlik app as containing an invalid field. \n  Please check that the value has been passed correctly, and is a valid Qlik sense expression containing fields which exist in the connected app."));case 37:v.qDangerousFieldNames.length>0&&console.warn("The measure '".concat(x,"', passed as the ").concat(V(p+1)," measure to a ").concat(a," component was flagged by the connected Qlik app as containing a dangerous field."));case 38:e.next=27;break;case 40:e.next=45;break;case 42:e.prev=42,e.t2=e.catch(25),d.e(e.t2);case 45:return e.prev=45,d.f(),e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[1,18,21,24],[6,11],[25,42,45,48]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[t])}}().dimMeasureCheck,w=Object(r.useContext)(Y),q=w.createObject,S=w.getObject,M=w.getObjectLayout,T=Object(r.useContext)(G),L=T.selections,z=T.selectValues,F=T.endSelections,A=Object(r.useContext)(k).theme,P=Object(r.useContext)(O),R=Object(r.useRef)(),I=Object(r.useRef)(),D=Object(r.useState)(null),H=Object(i.a)(D,2),W=H[0],X=H[1],_=Object(r.useState)(!1),J=Object(i.a)(_,2),Q=J[0],U=J[1],$=Object(r.useState)(null),Z=Object(i.a)($,2),ee=Z[0],te=Z[1],ne=Object(r.useState)(null),re=Object(i.a)(ne,2),ce=re[0],oe=re[1],le=Object(r.useState)(0),ie=Object(i.a)(le,2),se=ie[0],fe=ie[1],de=Object(r.useState)(0),me=Object(i.a)(de,2),be=me[0],pe=me[1];Object(r.useEffect)((function(){var e;e=d?"string"===typeof d?p(d):d:A,X(e)}),[d,A]),Object(r.useEffect)((function(){if(b){if(I.current=b,!Be[I.current])throw new Error('Unrecognized chart type, "'.concat(I.current,'" provided to Chart component. \n        Currently supported chart types are: ').concat(Object.keys(Be).join(", ")));U(!0)}}),[b]);var ve=Object(r.useCallback)((function(e){return M(e).then((function(e){var t=e.qHyperCube,r=t.qDimensionInfo,a=t.qMeasureInfo,o=e.qHyperCube.qDataPages[0].qMatrix.map((function(e){return{qElemNumber:e[0].qElemNumber,dimensions:e.slice(0,r.length).map((function(e,t){return{label:n&&n[t]&&c[t].label?n[t].label:r[t].qFallbackTitle,value:"NaN"===e.qNum?e.qText:e.qNum}})),measures:e.slice(r.length).map((function(e,t){return{label:c&&c[t]&&c[t].label?c[t].label:a[t].qFallbackTitle,format:c&&c[t].format||function(e){return e},value:e.qNum}}))}}));return oe(o),e}))}),[n,M,c]);Object(r.useEffect)((function(){fe(R.current.getBoundingClientRect().width),pe(j||R.current.getBoundingClientRect().height)}),[P.width,j]),Object(r.useEffect)((function(){if(!ee)if(t)S(t).then((function(e){te(e),ve(e).then((function(e){if(!b){if(I.current=e.qInfo.qType,!Be[I.current])throw new Error('Unrecognized chart type, "'.concat(I.current,'" provided to Chart component. \n                Currently supported chart types are: ').concat(Object.keys(Be).join(", ")));U(!0)}})),e.on("changed",(function(){ve(e)}))}));else{E(n,c,b);var e={qDimensions:n.map((function(e){return{qDef:{qFieldDefs:[(e="string"===typeof e?{field:e}:e).field]},qNullSuppression:!!e.excludeNull}})),qMeasures:c.map((function(e){var t={qDef:{qDef:(e="string"===typeof e?{formula:e}:e).formula}};return e.sorting?Object(l.a)(Object(l.a)({},t),{},{qSortBy:e.sorting}):t})),qInitialDataFetch:[{qTop:0,qLeft:0,qWidth:n.length+c.length,qHeight:100}]};q("cube",e).then((function(e){te(e),ve(e),e.on("changed",(function(){ve(e)}))}))}}),[ee,n,c,ve,I,E,q,t,S,b]);var ge=Be[I.current];return a.a.createElement(We,{ref:R,className:"".concat(I,"-feature"),style:{borderColor:L.values.length>0&&L.selectedModelId===ee.id?"#bbb":"transparent"}},ce&&W&&ce.length>0?a.a.createElement(u.a,{theme:W},a.a.createElement(Xe,{className:"controls",style:{display:L.values.length>0&&L.selectedModelId===ee.id?"flex":"none"}},a.a.createElement(he,{onClick:function(e){F(!1).then((function(){ve(ee)}))}},a.a.createElement(ae,null)),a.a.createElement(xe,{onClick:function(e){F(!0).then((function(){ve(ee)}))}},a.a.createElement(ue,null))),a.a.createElement(x,{className:"chart"},Q&&a.a.createElement(ge,{data:ce,selections:L.selectedModelId===ee.id?L.values:[],onDimensionClick:function(e){z(ee.id,[e.qElemNumber]).then((function(){ve(ee)}))},width:se,height:be,xLabel:s,yLabel:f,title:o,theme:W,dotSizeRange:[4,9],viewbox:m,xTickFormat:h,yTickFormat:v,xTickCount:g,yTickCount:y,TooltipComponent:Ie}))):a.a.createElement("p",null,"No data"))},_e=n(55),Ve=n(6);function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ue=a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),Ge=a.a.createElement("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"}),$e=function(e){var t=e.svgRef,n=e.title,r=Qe(e,["svgRef","title"]);return a.a.createElement("svg",Je({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),n?a.a.createElement("title",null,n):null,Ue,Ge)},Ke=a.a.forwardRef((function(e,t){return a.a.createElement($e,Je({svgRef:t},e))}));n.p;function Ze(){return(Ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function et(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var tt=a.a.createElement("defs",null,a.a.createElement("path",{id:"a",d:"M0 0h24v24H0V0z"})),nt=a.a.createElement("clipPath",{id:"b"},a.a.createElement("use",{xlinkHref:"#a",overflow:"visible"})),rt=a.a.createElement("path",{clipPath:"url(#b)",d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79 2.73 2.71 7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58 3.51-3.47 9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"}),at=function(e){var t=e.svgRef,n=e.title,r=et(e,["svgRef","title"]);return a.a.createElement("svg",Ze({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),n?a.a.createElement("title",null,n):null,tt,nt,rt)},ct=a.a.forwardRef((function(e,t){return a.a.createElement(at,Ze({svgRef:t},e))}));n.p;function ot(){return(ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var it=a.a.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),st=a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),ut=function(e){var t=e.svgRef,n=e.title,r=lt(e,["svgRef","title"]);return a.a.createElement("svg",ot({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),n?a.a.createElement("title",null,n):null,it,st)},ft=a.a.forwardRef((function(e,t){return a.a.createElement(ut,ot({svgRef:t},e))}));n.p;function dt(){var e=Object(s.a)(["\n  margin: 1px 0;\n  padding: 8px 10px;\n  display: flex;\n  justify-content: center;\n  cursor: default;\n  position: relative;\n  &.S { background-color: #69ff69 } /* selected */\n  &.A { background-color: #ddd } /* selected */\n  &.X { background-color: #a9a9a9 } /* excluded */\n  &.XS { \n    /* selected excluded */\n    background-color: #a9a9a9;\n    &::after {\n      content: '\u2714';\n      position: absolute;\n      right: 10px;\n      top: 50%;\n      transform: translateY(-50%);\n      color: #fff;\n      font-size: 14px;\n    }\n  }\n  &:hover {\n    &::before {\n      position: absolute;\n      content: \"\";\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      background-color: rgba(0,0,0,0.1);\n    }\n  }\n"]);return dt=function(){return e},e}function mt(){var e=Object(s.a)(["\n  margin: 7px;\n  display: flex;\n  justify-content: space-between;\n  div {\n    display: flex;\n  }\n"]);return mt=function(){return e},e}function bt(){var e=Object(s.a)(["\n  color: #333; \n  background-color: #fff; \n  max-height: 300px; \n  overflow-y: auto; \n  font-size: 0.6em; \n  z-index: 2;\n"]);return bt=function(){return e},e}function pt(){var e=Object(s.a)(["\n  position: absolute;\n  top: 100%;\n  width: 200px;\n  z-index: 10;\n  svg {\n    fill: #fff !important;\n  }\n"]);return pt=function(){return e},e}var ht=u.b.div(pt()),xt=u.b.div(bt()),vt=u.b.div(mt()),gt=u.b.div(dt());var yt=function(e){var t=e.onRequestClose,n=e.onClickAway,c=e.fieldInfo,o=e.fieldIndex,l=e.isExpanded,s=(e.onExpand,e.onClose,e.indexOfEl,Object(r.useContext)(Y)),u=s.createObject,f=s.getObjectLayout,d=Object(r.useContext)(G),m=d.selections,b=d.beginSelections,p=d.selectValues,h=d.endSelections,x=Object(r.useState)(null),v=Object(i.a)(x,2),g=v[0],y=v[1],O=Object(r.useState)([]),j=Object(i.a)(O,2),E=j[0],k=j[1],w=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}(m.selectedModelId),q=Object(r.useRef)();Object(r.useEffect)((function(){g&&w===g.id&&m.selectedModelId!==g.id&&t()}),[m.selectedModelId,g,w,t]);var S=Object(r.useRef)(!1);return Object(r.useEffect)((function(){var e=function(e){for(var t=!0,r=e.target;r.parentNode;){if(r===q.current){t=!1;break}r=r.parentNode}t&&n()};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[n]),Object(r.useEffect)((function(){S.current=!0;var e=function(e){f(e).then((function(e){return S.current&&k(e.qListObject.qDataPages[0].qMatrix.flat(1)),e}))};return g?l&&b(g.id):u("list",{qDef:{qFieldDefs:[c.qField],qSortCriterias:[{qSortByState:1}]},qShowAlternatives:!0,qInitialDataFetch:[{qTop:0,qLeft:0,qWidth:1,qHeight:100}]},"".concat(c.qField,"_Selections")).then((function(t){y(t),l&&b(t.id),e(t),t.on("changed",(function(){e(t)}))})),function(){S.current=!1}}),[l,c.qField,g,f,b,u]),a.a.createElement(ht,{style:{left:"".concat(200*o,"px")},ref:q},a.a.createElement(xt,null,a.a.createElement(vt,null,a.a.createElement(pe,{onClick:function(){var e=E.map((function(e){return e.qElemNumber}));p(g.id,e,!1)}},"Select all"),a.a.createElement("div",null,a.a.createElement(he,{onClick:function(){h(!1).then((function(){t()}))}},a.a.createElement(ae,null)),a.a.createElement(xe,{onClick:function(){h(!0).then((function(){t()}))}},a.a.createElement(ue,null)))),E.map((function(e){return a.a.createElement(gt,{key:e.qElemNumber,onClick:function(){return t=e.qElemNumber,void p(g.id,[t],!0);var t},className:e.qState},e.qText)}))))};function Ot(){var e=Object(s.a)(["\n  width: 200px;\n  padding: 0 10px;\n  box-sizing: border-box;\n  display: grid;\n  grid-template-columns: 150px 22px;\n  column-gap: 8px;\n  align-content: center;\n  font-size: 0.8em;\n  overflow: hidden;\n  background-color: #fff;\n  cursor: pointer;\n  .title {\n    font-weight: 600;\n  }\n  .info > span {\n    display: block;\n    white-space: nowrap;\n    font-weight: 400;\n    color: #8c8c8c;\n  }\n  .icon {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    svg {\n      fill: #8c8c8c;\n    }\n    &:hover svg {\n      fill: #404040;\n    }\n  }\n  &:hover {\n    background-color: #f6f6f6\n  }\n"]);return Ot=function(){return e},e}function jt(){var e=Object(s.a)(["\n  display: flex;\n  height: ",";\n  border-bottom: 1px solid #d9d9d9;\n  position: relative;\n"]);return jt=function(){return e},e}function Et(){var e=Object(s.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 0 6px;\n"]);return Et=function(){return e},e}function kt(){var e=Object(s.a)(["\n  display: grid;\n  grid-template-columns: 100px 1fr;\n  height: ",";\n  background-color: #f2f2f2;\n  border: 1px solid #d9d9d9;\n  & > div {\n    box-sizing: border-box;\n    &:nth-of-type(1) {\n      border-right: 1px solid #d9d9d9;\n    }\n    &:nth-of-type(2) {\n      background-color: #e6e6e6;\n      > div {\n        border-right: 1px solid #d9d9d9;\n      }\n    }\n  }\n"]);return kt=function(){return e},e}var wt=u.b.div(kt(),"46px"),qt=u.b.div(Et()),St=u.b.div(jt(),"46px"),Ct=u.b.div(Ot());function Nt(){var e=Object(r.useContext)(B).app,t=Object(r.useContext)(Y),n=t.objects,c=t.createObject,o=t.getObjectLayout,l=Object(r.useContext)(G),s=l.endSelections,u=l.clearFieldSelections,f=Object(r.useState)([]),d=Object(i.a)(f,2),m=d[0],b=d[1],p=Object(r.useState)(null),h=Object(i.a)(p,2),x=h[0],v=h[1],g=Object(r.useState)(null),y=Object(i.a)(g,2),O=y[0],j=y[1],E=Object(r.useRef)(),k=Object(r.useRef)(!1);Object(r.useEffect)((function(){if(k.current=!0,!x){var t=n.find((function(e){return"selections"===e.type})).id;e.getObject(t).then((function(e){v(e),o(e).then((function(e){var t=e.qSelectionObject;b(t.qSelections)})),e.on("changed",(function(){o(e).then((function(e){var t=e.qSelectionObject;k.current&&b(t.qSelections)}))}))}))}return function(){k.current=!1}}),[x,n,c,o,e]),Object(r.useEffect)((function(){j(null)}),[m.length]);var w=Object(r.useCallback)((function(){return j(null)}),[]),q=Object(r.useCallback)((function(){s(!0).then((function(){j(null)}))}),[s]);return a.a.createElement(wt,null,a.a.createElement(qt,null,a.a.createElement(pe,{onClick:function(){s(!0).then((function(){e.back()}))}},a.a.createElement(Ke,null)),a.a.createElement(pe,{onClick:function(){s(!0).then((function(){e.forward()}))}},a.a.createElement(ct,null))),a.a.createElement(St,{ref:E},m.map((function(e,t){return a.a.createElement(Ct,{key:t,onClick:function(){return function(e,t){j((function(n){return n&&n.info.qField===e.qField?null:{info:e,index:t}}))}(e,t)}},a.a.createElement("div",{className:"text"},a.a.createElement("span",{className:"title"},(n=e.qField).length>17?n.substr(0,17)+"...":n),a.a.createElement("span",{className:"info"},a.a.createElement("span",null,function(e){return e.qSelectedCount>1&&e.qSelectedCount<7?"".concat(e.qSelectedCount," of ").concat(e.qTotal):e.qSelected}(e)))),a.a.createElement("div",{className:"icon",onClick:function(t){var n;t.stopPropagation(),n=e.qField,s(!0).then((function(){u(n),j(null)}))}},a.a.createElement(ft,null)));var n})),O&&a.a.createElement(yt,{key:O.info.qField,fieldInfo:O.info,fieldIndex:O.index,onRequestClose:w,onClickAway:q})))}function Mt(){return a.a.createElement(_e.a,null,a.a.createElement("div",{className:"App"},a.a.createElement(Nt,null),a.a.createElement("div",{className:"ChartGrid"},a.a.createElement(Ve.c,null,a.a.createElement(Ve.a,{path:"/app1",component:function(){return a.a.createElement(Ye,{type:"linechart",dimensions:[{field:"Month",excludeNull:!0}],measures:[{formula:"Sum([Sales Margin Amount])",sorting:{qSortByNumberic:-1},format:function(e){return f.format(".2s")(e)},label:"Sales margin in Central US"}],theme:"sunsetblue",height:300})}}),a.a.createElement(Ve.a,{path:"/app2",component:function(){return a.a.createElement(Ye,{objectId:"MRmuW",height:300})}}),a.a.createElement(Ve.a,{path:"/app3",component:function(){return a.a.createElement(Ye,{objectId:"MEAjCJ",height:300})}}),a.a.createElement(Ve.a,{path:"/app4",component:function(){return a.a.createElement(Ye,{objectId:"bsxkrg",height:300})}})))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Tt(e){var t=e.children;return a.a.createElement(W,null,a.a.createElement(j,null,a.a.createElement(w,null,a.a.createElement(_,null,a.a.createElement($,null,t)))))}o.a.render(a.a.createElement(Tt,null,a.a.createElement(Mt,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[59,1,2]]]);
//# sourceMappingURL=main.2c4445d8.chunk.js.map