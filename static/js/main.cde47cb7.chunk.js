(this["webpackJsonpqlik-sense-clone_context"]=this["webpackJsonpqlik-sense-clone_context"]||[]).push([[0],{59:function(e,t,n){e.exports=n(78)},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){var r={"./standard.json":67,"./sunsetblue.json":68};function a(e){var t=c(e);return n(t)}function c(e){if(!n.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}a.keys=function(){return Object.keys(r)},a.resolve=c,e.exports=a,a.id=66},67:function(e){e.exports=JSON.parse('{"backgroundColor":"#fff","axisText":{"color":"#555","fontSize":"10px","fontWeight":500,"fontFamily":"Montserrat"},"axisLines":{"strokeWidth":null,"stroke":"#888"},"gridLines":{"strokeWidth":0.5,"stroke":"#aaa"},"labels":{"color":"#000","fontSize":"16px","fontWeight":null,"fontFamily":null},"gradients":{"sequential":"Blues","diverging":["#e42d21","#e8e0bb","#56d73c"]}}')},68:function(e){e.exports=JSON.parse('{"backgroundColor":"rgb(48, 48, 63)","axisText":{"color":"#fff","fontSize":"8px","fontWeight":500,"fontFamily":"Montserrat"},"axisLines":{"strokeWidth":null,"stroke":"#888"},"gridLines":{"strokeWidth":0.5,"stroke":"#aaa"},"labels":{"color":"#fff","fontSize":"16px","fontWeight":null,"fontFamily":null},"selectionHighlight":"#fff","gradients":{"sequential":["rgb(255, 207, 154)","rgb(215, 115, 0)"],"diverging":["#e42d21","#e8e0bb","#56d73c"]},"viewbox":{"backgroundFill":"rgba(255,255,255,0.15)","selectionStroke":"#fff"}}')},78:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(50),o=n.n(c),i=(n(64),n(65),n(5)),l=n(2),s=n(7),u=n(3),f=n(1),d=["standard","sunsetblue"],m=d.map((function(e){return{name:e,data:n(66)("./".concat(e,".json"))}}));function b(e){var t="string"===typeof e.gradients.sequential?f["interpolate"+e.gradients.sequential]:f.interpolateRgbBasis(e.gradients.sequential),n="string"===typeof e.gradients.sequential?f["interpolate"+e.gradients.sequential]:f.interpolateRgbBasis(e.gradients.sequential);return{backgroundColor:e.backgroundColor,axisText:e.axisText||{},axisLines:e.axisLines||{},gridLines:e.gridLines||!1,labels:Object(i.a)(Object(i.a)({},e.labels),{},{title:e.labels&&e.labels.title||{},xAxis:e.labels&&e.labels.xAxis||{},yAxis:e.labels&&e.labels.yAxis||{}}),gradients:{sequential:e.gradients&&e.gradients.sequential||{0:"#020024",37:"#090979",100:"#00d4ff"},diverging:e.gradients&&e.gradients.diverging||{0:"#e42d21",47:"#e8e0bb",100:"#56d73c"}},selectionHighlight:e.selectionHighlight||"#737373",colorScales:{sequential:function(e){return f.scaleSequential(t).domain(e)},diverging:function(e){return f.scaleDiverging(n).domain(e)}},viewbox:e.viewbox||{backgroundFill:"none",selectionFill:"rgba(0,0,0,0.1)",selectionStroke:"#ddd"}}}function p(e){var t=m.find((function(t){return t.name===e}));return b(t?t.data:m[0].data)}function h(){var e=Object(s.a)(["\n  svg {\n    background-color: ","\n  }\n  .axis {\n    .tick line {\n      stroke: ",";\n      stroke-width: ",";\n      display: ","\n    }\n    text {\n      fill: ",";\n      font-family: '","', sans-serif;\n      font-size: ",";\n      font-weight: ",";\n    }\n    .domain {\n      stroke: ",";\n    }\n  }\n  .brush .selection {\n    fill: ",";\n    stroke: ",";\n  }\n  .x-axis-label {\n    fill: ",";\n    font-weight: ",";\n    font-size: ",";\n    font-family: '","', sans-serif;\n  }\n  .y-axis-label {\n    fill: ",";\n    font-weight: ",";\n    font-size: ",";\n    font-family: '","', sans-serif;\n  }\n"]);return h=function(){return e},e}var x=u.b.div(h(),(function(e){return e.theme.backgroundColor}),(function(e){var t=e.theme;return t.axisLines.stroke||(t.gridLines?t.gridLines.stroke:null)}),(function(e){var t=e.theme;return t.gridLines?t.gridLines.strokeWidth:null}),(function(e){return e.theme.gridLines?"auto":"none"}),(function(e){return e.theme.axisText.color}),(function(e){return e.theme.axisText.fontFamily}),(function(e){return e.theme.axisText.fontSize}),(function(e){return e.theme.axisText.fontWeight}),(function(e){return e.theme.axisLines.stroke}),(function(e){return e.theme.viewbox.selectionFill}),(function(e){return e.theme.viewbox.selectionStroke}),(function(e){var t=e.theme;return t.labels.xAxis.color||t.labels.color}),(function(e){var t=e.theme;return t.labels.xAxis.fontWeight||t.labels.fontWeight}),(function(e){var t=e.theme;return t.labels.xAxis.fontSize||t.labels.fontSize}),(function(e){var t=e.theme;return t.labels.xAxis.fontFamily||t.labels.fontFamily}),(function(e){var t=e.theme;return t.labels.yAxis.color||t.labels.color}),(function(e){var t=e.theme;return t.labels.yAxis.fontWeight||t.labels.fontWeight}),(function(e){var t=e.theme;return t.labels.yAxis.fontSize||t.labels.fontSize}),(function(e){var t=e.theme;return t.labels.yAxis.fontFamily||t.labels.fontFamily})),v=n(53),g=n.n(v),y=a.a.createContext({width:window.innerWidth,height:window.innerHeight}),O=y,j=function(e){var t=e.children,n=Object(r.useState)({width:window.innerWidth,height:window.innerHeight}),c=Object(l.a)(n,2),o=c[0],i=c[1];return Object(r.useEffect)((function(){var e=g()((function(){i({width:window.innerWidth,height:window.innerHeight})}),300);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),a.a.createElement(y.Provider,{value:o},t)},E=a.a.createContext(null),k=E,w=function(e){var t=e.children,n=Object(r.useState)("sunsetblue"),c=Object(l.a)(n,2),o=c[0],i=c[1],s=Object(r.useState)(p(d[1])),u=Object(l.a)(s,2),f=u[0],m=u[1];return a.a.createElement(E.Provider,{value:{theme:f,themeName:o,setTheme:function(e){i(e),m(p(e))}}},t)},S=n(37),q=n(4),C=n.n(q),N=n(10),T=n(33),M=n(74),L=n(75),z={host:"localhost",isSecure:!1,port:4848,prefix:"",appId:"Consumer Sales.qvf",identity:new URLSearchParams(window.location.search).get("identity")||"openfin"},F=M.create({schema:L,url:"ws".concat(z.isSecure?"s":"","://").concat(z.host,":").concat(z.port,"/").concat(z.prefix?"".concat(z.prefix,"/"):"","app/engineData/identity/").concat(z.identity)});function A(){F.close()}var P=a.a.createContext(null),I=P,R=function(e){var t=e.children,n=Object(r.useState)(null),c=Object(l.a)(n,2),o=c[0],i=c[1],s=Object(r.useState)(!1),u=Object(l.a)(s,2),f=u[0],d=u[1];return Object(r.useEffect)((function(){return new Promise((function(e,t){F.open().then((function(t){t.openDoc(z.appId).then((function(t){e(t)}))})).catch((function(e){t(e)})),F.on("opened",(function(){console.log("session; opened")})),F.on("closed",(function(){console.log("session; closed")})),F.on("suspended",(function(e){console.log("session; suspended",e)})),F.on("resumed",(function(){console.log("session; resumed")})),F.on("notification:*",(function(e,t){return console.log("notification:".concat(e),t)})),F.on("socket-error",(function(e){console.log("socket-error",e)}))})).then((function(e){i(e)})),A}),[]),a.a.createElement(a.a.Fragment,null,o?a.a.createElement(P.Provider,{value:{app:o,computing:f,setComputing:d}},t):a.a.createElement("p",null,"Loading..."))};R.defaultProps={children:null};var D=a.a.createContext(null),B=D,H=function(e){var t=e.children,n=Object(r.useContext)(I),c=n.app,o=n.computing,i=Object(r.useState)([]),s=Object(l.a)(i,2),u=s[0],f=s[1],d=Object(r.useCallback)((function(e){f((function(t){return[].concat(Object(T.a)(t),[e])}))}),[]),m=Object(r.useCallback)((function(e){var t=u.findIndex((function(t){return t.id===e}));f((function(e){return Object(T.a)(e).splice(t,1)}))}),[u]),b=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.getObject(t);case 3:n=e.sent,e.next=10;break;case 6:throw e.prev=6,e.t0=e.catch(0),console.log(e.t0),new Error("Whoops, couldn't find the requested object with id \"".concat(t,'", in the connected qlik app. Please check the object id and try again'));case 10:return e.next=12,n.getProperties();case 12:return(r=e.sent).qHyperCubeDef.qInitialDataFetch=[{qTop:0,qLeft:0,qWidth:10,qHeight:100}],e.next=16,n.setProperties(r);case 16:return d({id:n.id,type:"cube"}),e.abrupt("return",n);case 18:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),[c,d]),p=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t,n,r){var a,o,i;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t,e.next="cube"===e.t0?3:"list"===e.t0?6:"selections"===e.t0?9:12;break;case 3:return a="qHyperCube",o="qHyperCubeDef",e.abrupt("break",15);case 6:return a="qListObject",o="qListObjectDef",e.abrupt("break",15);case 9:return a="CurrentSelections",o="qSelectionObjectDef",e.abrupt("break",15);case 12:return a=null,o=null,e.abrupt("break",15);case 15:return i=a&&o?Object(S.a)({qInfo:{qType:r||a}},o,n||{}):t,e.abrupt("return",c.createSessionObject(i).then((function(e){return d({id:e.id,type:t,ref:r}),e})));case 17:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[c,d]),h=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t){var n,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:if(!(n<20)){e.next=21;break}if(o){e.next=18;break}r=void 0;case 4:if(r){e.next=17;break}return e.prev=5,e.next=8,t.getLayout();case 8:r=e.sent,e.next=15;break;case 11:return e.prev=11,e.t0=e.catch(5),e.next=15,new Promise((function(e){return setTimeout(e,200)}));case 15:e.next=4;break;case 17:return e.abrupt("return",r);case 18:n++,e.next=1;break;case 21:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),[o]),x=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.destroySessionObject(t);case 2:m(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[c,m]);return a.a.createElement(D.Provider,{value:{objects:u,createObject:p,getObject:b,getObjectLayout:h,destroyObject:x}},t)};function W(e){var t=["th","st","nd","rd"],n=e%100;return e+(t[(n-20)%10]||t[n]||t[0])}function X(e,t,n){var r=document.createElement("svg"),a=document.createElement("text");a.appendChild(document.createTextNode(e)),a.style.fontSize=t,a.style.fontFamily=n,a.style.visibility="hidden",a.style.whiteSpace="nowrap",r.appendChild(a),document.body.appendChild(r);var c=a.getBoundingClientRect().width;return document.body.removeChild(r),c}var Y=function(e){var t,n;switch(e){case"cube":t="/qHyperCubeDef",n="qHyperCube";break;case"list":t="/qListObjectDef",n="qListObject";break;default:throw new Error("NOT IMPLEMENTED")}return{path:t,object:n}},_=a.a.createContext(null),V=_,J=function(e){var t=e.children,n=Object(r.useContext)(I),c=n.app,o=n.setComputing,s=Object(r.useContext)(B),u=s.objects,f=s.createObject,d=s.destroyObject,m=Object(r.useState)({selectedModelId:null,selectedModelType:null,isSelecting:!1,values:[]}),b=Object(l.a)(m,2),p=b[0],h=b[1],x=Object(r.useState)(null),v=Object(l.a)(x,2),g=v[0],y=v[1],O=Object(r.useCallback)((function(e){var t=e.id,n=e.type,r=e.values;h((function(e){return Object(i.a)(Object(i.a)({},e),{},{selectedModelId:t,selectedModelType:n,isSelecting:!0,values:r||[]})}))}),[]),j=Object(r.useCallback)((function(){h((function(e){return Object(i.a)(Object(i.a)({},e),{},{selectedModelId:null,selectedModelType:null,isSelecting:!1,values:[]})}))}),[]),E=Object(r.useCallback)((function(e){h((function(t){return Object(i.a)(Object(i.a)({},t),{},{values:e})}))}),[]),k=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=p.isSelecting,r=p.selectedModelId,n&&r!==t){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,c.getObject(r);case 6:return a=e.sent,o(!0),e.next=10,a.endSelections(!0);case 10:o(!1),e.next=16;break;case 13:return e.prev=13,e.t0=e.catch(3),e.abrupt("return",new Error("Couldn't end selections on ".concat(r)));case 16:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t){return e.apply(this,arguments)}}(),[c,o,p]),w=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t){var n,r,a,i,l,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k(t);case 3:if(n=p.selectedModelId,r=u.find((function(e){return e.id===t})),a=r.type,i=Y(a),l=i.path,n===t){e.next=15;break}return e.next=9,c.getObject(t);case 9:return s=e.sent,o(!0),e.next=13,s.beginSelections([l]);case 13:o(!1),O({id:t,type:a});case 15:return e.abrupt("return");case 18:return e.prev=18,e.t0=e.catch(0),e.abrupt("return",new Error("Couldn't begin selections on ".concat(t," - ").concat(e.t0)));case 21:case"end":return e.stop()}}),e,null,[[0,18]])})));return function(t){return e.apply(this,arguments)}}(),[c,u,O,o,p,k]),S=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t){var n,r,a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof t){e.next=2;break}throw new Error("'Save changes' boolean parameter is required for endSelections method");case 2:return n=p.selectedModelId,r=p.isSelecting,e.prev=3,e.next=6,c.getObject(n);case 6:if(a=e.sent,r){e.next=9;break}return e.abrupt("return",Promise.resolve("No selections in progress"));case 9:return o(!0),e.next=12,a.endSelections(t);case 12:return o(!1),e.abrupt("return",j());case 16:return e.prev=16,e.t0=e.catch(3),e.abrupt("return",new Error("Couldn't end selections - ".concat(e.t0)));case 19:case"end":return e.stop()}}),e,null,[[3,16]])})));return function(t){return e.apply(this,arguments)}}(),[c,j,o,p]),q=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t,n,r){var a,i,l,s;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,a=u.find((function(e){return e.id===t})),i=a.type){e.next=4;break}throw new Error("Whoops, specified object not found (ObjectID ".concat(t,")"));case 4:return e.next=6,w(t);case 6:return"undefined"===typeof r&&(r=p.values.length>0&&p.selectedModelId===t),e.next=9,c.getObject(t);case 9:if(l=e.sent,o(!0),"cube"!==i){e.next=16;break}return e.next=14,l.selectHyperCubeValues("/qHyperCubeDef",0,n,r);case 14:e.next=22;break;case 16:if("list"!==i){e.next=21;break}return e.next=19,l.selectListObjectValues("/qListObjectDef",n,r);case 19:e.next=22;break;case 21:return e.abrupt("return",new Error("NOT IMPLEMENTED FOR OBJECT TYPE"+i));case 22:if(o(!1),s=Object(T.a)(p.values),n.forEach((function(e){var t=s.findIndex((function(t){return t===e}));t>-1?s[t]=null:s.push(e)})),s=s.filter((function(e){return null!==e})),E(p.selectedModelId===t?s:n),0!==s.length){e.next=30;break}return e.next=30,S(!1);case 30:return e.abrupt("return",Promise.resolve(p.values));case 33:throw e.prev=33,e.t0=e.catch(0),new Error("Error selecting values - "+e.t0);case 36:case"end":return e.stop()}}),e,null,[[0,33]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[c,w,S,u,o,p.values,E]),M=Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.getField(t);case 3:return e.sent.clear(),e.abrupt("return",Promise.resolve("Cleared ".concat(t," selections")));case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",new Error("Error clearing field selections",e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),[c]);return Object(r.useEffect)((function(){return f("selections").then((function(e){y(e.id)})),function(){g&&d(g)}}),[]),a.a.createElement(a.a.Fragment,null,g?a.a.createElement(_.Provider,{value:{selections:p,beginSelections:w,selectValues:q,endSelections:S,clearFieldSelections:M}},t):a.a.createElement("p",null,"Loading"))},U=n(42);function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var G=a.a.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),K=a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),Z=function(e){var t=e.svgRef,n=e.title,r=$(e,["svgRef","title"]);return a.a.createElement("svg",Q({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),n?a.a.createElement("title",null,n):null,G,K)},ee=a.a.forwardRef((function(e,t){return a.a.createElement(Z,Q({svgRef:t},e))}));n.p;function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ne(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var re=a.a.createElement("path",{fill:"none",d:"M0 0h24v24H0z"}),ae=a.a.createElement("path",{d:"M9 16.2L4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z"}),ce=function(e){var t=e.svgRef,n=e.title,r=ne(e,["svgRef","title"]);return a.a.createElement("svg",te({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),n?a.a.createElement("title",null,n):null,re,ae)},oe=a.a.forwardRef((function(e,t){return a.a.createElement(ce,te({svgRef:t},e))}));n.p;function ie(){var e=Object(s.a)(["\n  background-color:  #00dc00;\n  .MuiSvgIcon-root {\n    fill: #fff !important;\n  }\n"]);return ie=function(){return e},e}function le(){var e=Object(s.a)(["\n  background-color: red;\n  .MuiSvgIcon-root {\n    fill: #fff !important;\n  }\n"]);return le=function(){return e},e}function se(){var e=Object(s.a)(['\n  border: none;\n  border-radius: 3px;\n  margin: auto 3px;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  height: 30px;\n  background-color: transparent;\n  position: relative;\n  outline: none;\n  &:hover::after {\n    position: absolute;\n    content: "";\n    left: 0; right: 0; top: 0; bottom: 0;\n    background-color: rgba(0,0,0,0.05)\n  }\n  cursor: pointer;\n  svg {\n    fill: #666;\n  }\n  &:active svg {\n    fill: #333;\n  }\n']);return se=function(){return e},e}var ue=u.b.button(se()),fe=ue,de=Object(u.b)(ue)(le()),me=Object(u.b)(ue)(ie()),be=n(54),pe=n.n(be),he=function(e){return e.measures[0].value},xe=function(e){return e.measures[1].value},ve=function(e){return e.measures[2]?e.measures[2].value:5};var ge=function(e){var t=e.data,n=e.width,c=e.height,o=e.onDimensionClick,i=e.selections,s=e.title,u=e.dotSizeRange,d=e.theme,m=e.xTickFormat,b=e.yTickFormat,p=e.xTickCount,h=e.yTickCount,x=e.TooltipComponent,v=Object(r.useRef)(),g=Object(r.useRef)();u=u||[4,8];var y=Object(r.useState)(0),O=Object(l.a)(y,2),j=O[0],E=O[1],k=Object(r.useState)(0),w=Object(l.a)(k,2),S=w[0],q=w[1],C=Object(r.useState)({x:null,y:null}),N=Object(l.a)(C,2),T=N[0],M=N[1],L=Object(r.useState)(null),z=Object(l.a)(L,2),F=z[0],A=z[1],P=t[0].measures[0].label,I=t[0].measures[1].label,R={left:I?100:60,right:30,top:s?50:15,bottom:P?70:35};return Object(r.useEffect)((function(){A((function(e){return pe()(e,t)?e:t}))}),[t]),Object(r.useEffect)((function(){E(n-(R.left+R.right)),q(c-(R.top+R.bottom))}),[n,c,R]),Object(r.useEffect)((function(){M({x:f.scaleLinear(),y:f.scaleLinear()})}),[]),Object(r.useEffect)((function(){F&&T.x&&(T.x.domain([0,1]),T.y.domain([0,f.max(F,(function(e){return xe(e)}))]).nice())}),[F,T]),Object(r.useEffect)((function(){j&&S&&(T.x.range([0,j]),T.y.range([S,0]))}),[T,j,S]),Object(r.useEffect)((function(){if(T.y){var e=f.select(v.current).select(".inner-box"),t=ve(F[0])?f.scaleLinear().domain(f.extent(F.map((function(e){return ve(e)})))).range([u[0],u[1]]):function(){return.4*(u[0]+u[1])},n=d.colorScales.sequential(f.extent(F.map((function(e){return ve(e)})))),r=e.select(".points").selectAll("circle").data(F);r.enter().append("circle").attr("cx",(function(e){return T.x(he(e))})).attr("cy",S).style("opacity",0).merge(r).transition().duration(800).attr("class","point").attr("cx",(function(e){return T.x(he(e))})).attr("cy",(function(e){return T.y(xe(e))})).attr("r",(function(e){return i.includes(e.qElemNumber)?1.15*t(ve(e)):t(ve(e))})).style("fill",(function(e){return n(ve(e))})).style("opacity",(function(e){return i.includes(e.qElemNumber)?1:.75})).style("stroke",(function(e){return i.includes(e.qElemNumber)?d.selectionHighlight:null})).style("stroke-width",u[0]/4+"px"),r.exit().transition().duration(600).style("opacity",0).attr("cy",S).remove();var a=f.select(g.current),c=e.select(".points").selectAll("circle");c.on("mouseover",(function(e){a.select(".title").text(e.dimensions[0].value),a.select(".content").text(""),e.measures.forEach((function(e){a.select(".content").append("span").attr("class","measure").html("<span>".concat(e.label,"</span>&nbsp;&nbsp;&nbsp;<strong>").concat(e.format(e.value),"</strong>"))})),a.style("opacity",1),f.select(this).attr("r",1.15*t(ve(e))).style("opacity",null)})),c.on("mousemove",(function(e){a.style("transform","translateX(calc(".concat(R.left+T.x(he(e)),"px - 50%)) translateY(calc(").concat(T.y(xe(e)),"px - 110%))"))})),c.on("mouseout",(function(e){a.style("opacity",0),f.select(this).attr("r",i.includes(e.qElemNumber)?1.15*t(ve(e)):t(ve(e))).style("stroke",i.includes(e.qElemNumber)?d.selectionHighlight:null).style("opacity",i.includes(e.qElemNumber)?1:.75)})),c.on("click",(function(e){o(e)}))}}),[T,j,S,F,o,i,u,d,R]),Object(r.useEffect)((function(){if(T.y){var e=f.select(v.current).select(".inner-box"),t=f.axisBottom(T.x).tickSize(-S);t.tickFormat(F[0].measures[0].format),p&&t.ticks(p),e.select(".x.axis").call(t).transition().duration(400).attr("transform","translate(0,".concat(S,")")).selectAll("text").attr("transform","translate(0, 5)");var n=f.axisLeft(T.y).tickSize(-j);n.tickFormat(F[0].measures[1].format),h&&n.ticks(h),e.select(".y.axis").call(n).style("opacity",0).transition().duration(400).style("opacity",1).selectAll("text").attr("transform","translate(-5, 0)"),e.select(".y.axis").enter(),e.selectAll(".axis .tick:nth-of-type(1) line").style("stroke",d.axisLines.stroke),e.selectAll(".axis text").style("fill",d.axisText.color),e.selectAll(".axis .domain").style("display","none"),e.selectAll(".axis .tick:not(:nth-of-type(1)) line").attr("stroke",d.gridLines?d.gridLines.stroke:null).attr("stroke-width",d.gridLines?d.gridLines.strokeWidth:null).style("display",d.gridLines?"auto":"none")}}),[F,j,S,T,d,p,m,h,b]),a.a.createElement(a.a.Fragment,null,a.a.createElement("svg",{ref:v,width:n,height:c},a.a.createElement("g",{className:"inner-box",pointerEvents:"all",transform:"translate(".concat(R.left,", ").concat(R.top,")")},a.a.createElement("g",{className:"x axis"}),a.a.createElement("g",{className:"y axis"}),a.a.createElement("g",{className:"points"}),a.a.createElement("text",{className:"x-axis-label",transform:"translate(".concat(j/2,", ").concat(S+R.bottom/2+10,")"),textAnchor:"middle"},P),a.a.createElement("text",{className:"y-axis-label",transform:"translate(".concat(-60,", ").concat(S/2,") rotate(-90)"),textAnchor:"middle"},I)),a.a.createElement("text",{className:"chart-title",fill:"#000",transform:"translate(".concat(n/2,", ").concat(R.top/2+3,")"),textAnchor:"middle"},s)),a.a.createElement(x,{ref:g}))},ye=n(49).lasso,Oe=function(e){return e.dimensions[0].value},je=function(e){return e.measures[0].value};var Ee=function(e){var t=e.theme,n=e.lassoActive,c=e.hasLasso,o=e.data,s=e.width,u=e.height,d=e.selections,m=e.onDimensionClick,b=e.chartTitle,p=e.viewbox,h=(e.yTickFormat,e.xTickFormat),x=e.xTickCount,v=e.yTickCount,g=e.TooltipComponent,y=Object(r.useState)([]),O=Object(l.a)(y,2),j=O[0],E=O[1],k=Object(r.useRef)(),w=Object(r.useRef)(n),S=Object(r.useRef)(),q=Object(r.useState)(0),C=Object(l.a)(q,2),N=C[0],T=C[1],M=Object(r.useState)(0),L=Object(l.a)(M,2),z=L[0],F=L[1],A=Object(r.useState)(0),P=Object(l.a)(A,2),I=P[0],R=P[1],D=Object(r.useState)({x:null,y:null,boxY:null,boxX:null}),B=Object(l.a)(D,2),H=B[0],W=B[1],Y=Object(r.useState)(!1),_=Object(l.a)(Y,2),V=_[0],J=_[1],U=o[0].dimensions[0].label,Q=o[0].measures[0].label,$=Object(r.useState)({top:30,right:Q?Math.min(Math.max(.07*s,40),80):Math.min(Math.max(.05*s,30),60),middle:0,left:Q?Math.min(Math.max(.1*s,80),130):Math.min(Math.max(.05*s,30),60),bottom:20}),G=Object(l.a)($,2),K=G[0],Z=G[1],ee=!1===p?1:Math.max(1,23/(I/j.length));Object(r.useEffect)((function(){o.length>0&&E(o)}),[o]);var te=Object(r.useCallback)((function(){return f.select(k.current)}),[]);return Object(r.useEffect)((function(){var e=X(o.map(Oe).reduce((function(e,t){return t.length>e.length?t:e}),Oe(o[0])),t.axisText.fontSize,t.axisText.fontFamily);e=Math.sqrt(Math.pow(e,2)/2),Z((function(t){return Object(i.a)(Object(i.a)({},t),{},{middle:e+(U?60:20)})}))}),[s,u,te,o,t,U]),Object(r.useEffect)((function(){if(K.middle){var e=s-(K.left+K.right);R(e);var t=ee>1?K.top+K.middle+K.bottom:K.top+K.middle,n=u-t,r=ee>1?.175*n:0;T(n-r),F(r),J(!0)}}),[s,u,te,K,ee]),Object(r.useEffect)((function(){var e=f.scaleBand().range([0,I]).padding(.35),t=f.scaleBand().range([0,I]).padding(.35),n=f.scaleLinear().range([N,0]),r=f.scaleLinear().range([z,0]);W({x:e,y:n,boxY:r,boxX:t})}),[I,N,z]),Object(r.useEffect)((function(){if(V){var e=f.select(k.current).select(".inner-box"),n=j,r=H.x,a=H.y,o=H.boxY,i=H.boxX;r.domain(n.map(Oe)),i.domain(r.domain()),a.domain([0,f.max(n,(function(e){return je(e)}))]).nice(),o.domain([0,f.max(n,(function(e){return je(e)}))]).nice();var l=e.select(".bars").selectAll("rect").data(n),s=e.select(".viewbox.bars").selectAll("rect").data(n),u=e.selectAll(".bars").selectAll("rect").data(n),b={lower:f.quantile(n,.05,(function(e){return je(e)})),upper:f.quantile(n,.9,(function(e){return je(e)}))},p=[[0,K.top],[I,N]],h=f.zoom().scaleExtent([1,8]).translateExtent(p).extent(p).filter((function(){return!f.event.wheelDelta})),x=t.colorScales.sequential([b.upper,b.lower]),v=function(e){return d.includes(e.qElemNumber)?1:.75},g=function(e){return e[0].parentNode.matches(".viewbox")},y=function(e){return N-a(je(e))>0?N-a(je(e)):0},O=f.brushX().extent([[0,N+K.middle],[I,N+K.middle+z]]).on("brush end",(function(){if(!f.event.sourceEvent||"zoom"!==f.event.sourceEvent.type){var t=f.event.selection||i.range();r.range([0,I*ee].map((function(e){return e-t[0]*ee}))),l.attr("width",r.bandwidth()).attr("height",y).attr("x",(function(e){return r(Oe(e))})).style("opacity",v),s.attr("opacity",(function(e){return i(Oe(e))>t[0]&&i(Oe(e))+i.bandwidth()<t[1]?1:.7})),e.select(".x.axis").call(f.axisBottom(r))}}));e.select(".brush").call(O).call(O.move,i.range()).selectAll(".handle, .overlay").attr("pointer-events","none");w.current?h.on("zoom",null):h.on("zoom",(function(){if(!f.event.sourceEvent||"brush"!==f.event.sourceEvent.type){f.event.transform.k=ee,r.range([0,I].map((function(e){return f.event.transform.applyX(e)}))),l.attr("width",r.bandwidth()).attr("height",y).attr("x",(function(e){return r(Oe(e))})).style("opacity",v),e.select(".x.axis").call(f.axisBottom(r)).selectAll("text").attr("transform","rotate(-45) translate(-10, -6)");var t=f.event.transform;e.select(".brush").call(O.move,i.range().map(t.invertX,t))}})),e.call(h),f.zoomTransform(e).k!==ee&&h.scaleTo(e,ee,[0,0]);u.enter().append("rect").merge(u).transition().duration(250).attr("class","bar").attr("width",(function(e,t,n){return g(n)?i.bandwidth():r.bandwidth()})).attr("height",(function(e,t,n){return g(n)?function(e){return z-o(je(e))>0?z-o(je(e)):0}(e):y(e)})).attr("x",(function(e,t,n){return g(n)?i(Oe(e)):r(Oe(e))})).attr("y",(function(e,t,n){return g(n)?o(je(e)):a(je(e))})).attr("fill",(function(e){return x(je(e))})).attr("stroke",(function(e){return d&&d.includes(e.qElemNumber)?t.selectionHighlight:"none"})).attr("stroke-width",1).attr("clip-path","url(#inner-clip)"),u.exit().transition().duration(250).attr("x",-r.bandwidth()-10).style("opacity",0).remove();if(0===e.select(".lasso").nodes().length&&c){var E=ye(f).closePathSelect(!0).closePathDistance(100).items(l.data(n)).targetArea(e);E.on("start",(function(){w.current&&E.items().attr("r",3.5).classed("not_possible",!0).classed("selected",!1)})),E.on("draw",(function(){w.current&&(E.possibleItems().classed("not_possible",!1).classed("possible",!0),E.notPossibleItems().classed("not_possible",!0).classed("possible",!1))})),E.on("end",(function e(){if(w.current){E.items().classed("not_possible",!1).classed("possible",!1);var t=[];E.selectedItems().each((function(e){return t.push(e.qElemNumber)})),e(),E.notSelectedItems()}})),e.call(E)}var q=f.select(S.current);l.on("mouseover",(function(e){f.select(this).style("opacity",1),q.select(".title").text(e.dimensions[0].value),q.select(".content").text(""),e.measures.forEach((function(e){q.select(".content").append("span").attr("class","measure").html("<span>".concat(e.label,"</span>&nbsp;&nbsp;&nbsp;<strong>").concat(e.format(e.value),"</strong>"))})),q.style("opacity",1)})).on("mousemove",(function(e){q.style("transform","translateX(calc(".concat(K.left+r(Oe(e))+r.bandwidth()/2,"px - 50%)) translateY(").concat(a(je(e))-30,"px)"))})).on("mouseout",(function(e){q.style("opacity",0),f.select(this).transition("restoreBarColor").duration(150).style("opacity",v)})).on("click",(function(e){m(e)}))}}),[j,H,I,N,z,m,w,d,t,te,c,K,V,ee]),Object(r.useEffect)((function(){if(H.y){var e=f.select(k.current),t=f.axisLeft(H.y);t.tickFormat(j[0].measures[0].format),v&&t.ticks(v),e.select(".y.axis").call(t).transition().duration(300);var n=f.axisBottom(H.x);h&&n.tickFormat(h),x&&n.ticks(x),e.select(".x.axis").call(n).transition().duration(300).attr("transform","translate(0,".concat(N,")")).attr("clip-path","url(#outer-clip)").selectAll("text").attr("transform","rotate(-45) translate(-10, -6)").style("text-anchor","end").attr("dx","6").attr("dy","4"),e.select(".x.axis").selectAll(".domain, .tick line").attr("clip-path","url(#inner-clip)"),e.select(".chart-title").attr("transform","translate(".concat(I/2,", -35)")).style("text-anchor","middle").style("font-size","25px").style("font-weight","bold")}})),a.a.createElement(a.a.Fragment,null,a.a.createElement("svg",{ref:k,width:s,height:u},a.a.createElement("text",{className:"chart-title",fill:"#fff"},b),a.a.createElement("text",{transform:"translate(".concat(I/2+K.left,", ").concat(N+K.middle,")"),className:"x-axis-label",textAnchor:"middle"},U),a.a.createElement("text",{className:"y-axis-label",transform:"translate(".concat(.5*K.left-(t.labels.xAxis.fontSize||t.labels.fontSize).replace(/\D/g,""),", ").concat(N/2+K.top,") rotate(-90)"),textAnchor:"middle"},Q),a.a.createElement("g",{className:"inner-box",pointerEvents:"all",transform:"translate(".concat(K.left,", ").concat(K.top,")")},a.a.createElement("rect",{className:"zoom-sensor",transform:"translate(0, -".concat(K.top,")"),width:I,height:u,style:{fill:"none"},pointerEvents:"all"}),a.a.createElement("g",{className:"bars"}),a.a.createElement("g",{className:"x axis"}),a.a.createElement("g",{className:"y axis"}),1!==ee?a.a.createElement(a.a.Fragment,null,a.a.createElement("g",{className:"viewbox",transform:"translate(0, ".concat(N+K.middle,")"),pointerEvents:"none"},a.a.createElement("rect",{fill:t.viewbox.backgroundFill,width:I,height:z}),a.a.createElement("g",{className:"viewbox bars"})),a.a.createElement("g",{className:"brush"})):a.a.createElement(a.a.Fragment,null),a.a.createElement("clipPath",{id:"inner-clip"},a.a.createElement("rect",{transform:"translate(0, -".concat(K.top,")"),width:I,height:u})),a.a.createElement("clipPath",{id:"outer-clip"},a.a.createElement("rect",{transform:"translate(-8, -".concat(K.top,")"),width:I+8,height:u})))),a.a.createElement(g,{ref:S}))},ke=n(49).lasso,we=function(e){return e.dimensions[0].value},Se=function(e){return e.measures[0].value};var qe=function(e){var t=e.theme,n=e.lassoActive,c=e.hasLasso,o=e.data,s=e.width,u=e.height,d=e.selections,m=e.onDimensionClick,b=e.chartTitle,p=e.viewbox,h=(e.yTickFormat,e.xTickFormat),x=e.xTickCount,v=e.yTickCount,g=e.TooltipComponent,y=Object(r.useState)([]),O=Object(l.a)(y,2),j=O[0],E=O[1],k=Object(r.useRef)(),w=Object(r.useRef)(n),S=Object(r.useRef)(),q=Object(r.useState)(0),C=Object(l.a)(q,2),N=C[0],T=C[1],M=Object(r.useState)(0),L=Object(l.a)(M,2),z=L[0],F=L[1],A=Object(r.useState)(0),P=Object(l.a)(A,2),I=P[0],R=P[1],D=Object(r.useState)({x:null,y:null,boxY:null,boxX:null}),B=Object(l.a)(D,2),H=B[0],W=B[1],Y=Object(r.useState)(!1),_=Object(l.a)(Y,2),V=_[0],J=_[1],U=o[0].dimensions[0].label,Q=o[0].measures[0].label,$=Object(r.useState)({top:30,right:Q?Math.min(Math.max(.07*s,40),80):Math.min(Math.max(.05*s,30),60),middle:0,left:Q?Math.min(Math.max(.1*s,80),130):Math.min(Math.max(.05*s,30),60),bottom:20}),G=Object(l.a)($,2),K=G[0],Z=G[1],ee=!1===p?1:Math.max(1,23/(I/j.length));Object(r.useEffect)((function(){o.length>0&&E(o.sort((function(e,t){return e.dimensions[0].value-t.dimensions[0].value})))}),[o]);var te=Object(r.useCallback)((function(){return f.select(k.current)}),[]);return Object(r.useEffect)((function(){var e=X(o.map(we).reduce((function(e,t){return t.length>e.length?t:e}),we(o[0])),t.axisText.fontSize,t.axisText.fontFamily);e=Math.sqrt(Math.pow(e,2)/2),Z((function(t){return Object(i.a)(Object(i.a)({},t),{},{middle:e+(U?60:20)})}))}),[s,u,te,o,t,U]),Object(r.useEffect)((function(){if(K.middle){var e=s-(K.left+K.right);R(e);var t=ee>1?K.top+K.middle+K.bottom:K.top+K.middle,n=u-t,r=ee>1?.175*n:0;T(n-r),F(r),J(!0)}}),[s,u,te,K,ee]),Object(r.useEffect)((function(){var e=f.scaleLinear().range([0,I]),t=f.scaleBand().range([0,I]).padding(.35),n=f.scaleLinear().range([N,0]),r=f.scaleLinear().range([z,0]);W({x:e,y:n,boxY:r,boxX:t})}),[I,N,z]),Object(r.useEffect)((function(){if(V){var e=f.select(k.current).select(".inner-box"),n=j,r=H.x,a=H.y,o=H.boxY,i=H.boxX;r.domain(f.extent(n,(function(e){return we(e)}))).nice(),i.domain(r.domain());a.domain(function(e,t){var n=Object(l.a)(e,2),r=n[0],a=n[1],c=(a-r)*t/2;return[r-c,a+c]}(f.extent(n,(function(e){return Se(e)})),.7)).nice(),o.domain(a.domain());var s=e.select(".bars").selectAll("circle").data(n),u=e.select(".viewbox.bars").selectAll("circle").data(n),b=e.selectAll(".bars").selectAll("circle").data(n),p={lower:f.quantile(n,.05,(function(e){return Se(e)})),upper:f.quantile(n,.9,(function(e){return Se(e)}))},h=[[0,K.top],[I,N]],x=f.zoom().scaleExtent([1,8]).translateExtent(h).extent(h).filter((function(){return!f.event.wheelDelta})),v=t.colorScales.sequential([p.lower,p.upper]),g=function(e){return d.includes(e.qElemNumber)?1:.75},y=function(e){return e[0].parentNode.matches(".viewbox")},O=f.brushX().extent([[0,N+K.middle],[I,N+K.middle+z]]).on("brush end",(function(){if(!f.event.sourceEvent||"zoom"!==f.event.sourceEvent.type){var t=f.event.selection||i.range();r.range([0,I*ee].map((function(e){return e-t[0]*ee}))),s.attr("cx",(function(e,t,n){return y(n)?i(we(e)):r(we(e))})).style("opacity",g),u.attr("opacity",(function(e){return i(we(e))>t[0]&&i(we(e))<t[1]?1:.7})),e.select(".x.axis").call(f.axisBottom(r)),e.select(".line").transition().duration(500).attr("d",f.line().x((function(e){return r(we(e))})).y((function(e){return a(Se(e))})))}}));e.select(".brush").call(O).call(O.move,i.range()).selectAll(".handle, .overlay").attr("pointer-events","none");w.current?x.on("zoom",null):x.on("zoom",(function(){if(!f.event.sourceEvent||"brush"!==f.event.sourceEvent.type){f.event.transform.k=ee,r.range([0,I].map((function(e){return f.event.transform.applyX(e)}))),s.attr("cx",(function(e,t,n){return y(n)?i(we(e)):r(we(e))})).style("opacity",g),e.select(".x.axis").call(f.axisBottom(r)).selectAll("text").attr("transform","rotate(-45) translate(-10, -6)");var t=f.event.transform;e.select(".brush").call(O.move,i.range().map(t.invertX,t)),e.select(".line").transition().duration(500).attr("d",f.line().x((function(e){return r(we(e))})).y((function(e){return a(Se(e))})))}})),e.call(x),f.zoomTransform(e).k!==ee&&x.scaleTo(e,ee,[0,0]);b.enter().append("circle").merge(b).transition().duration(250).attr("class","bar").attr("r",(function(e,t,n){return y(n)?1:3})).attr("cx",(function(e,t,n){return y(n)?i(we(e)):r(we(e))})).attr("cy",(function(e,t,n){return y(n)?o(Se(e)):a(Se(e))})).attr("fill",(function(e){return v(f.max(n,Se))})).attr("stroke",(function(e){return d&&d.includes(e.qElemNumber)?t.selectionHighlight:"none"})).attr("stroke-width",1).attr("clip-path","url(#inner-clip)"),b.exit().transition().duration(250).attr("x",-13).style("opacity",0).remove(),e.select(".line").datum(n).transition().duration(500).attr("d",f.line().x((function(e){return r(we(e))})).y((function(e){return a(Se(e))}))).attr("fill","none").attr("stroke",v(f.median(n,Se))).attr("stroke-width",1.3);if(0===e.select(".lasso").nodes().length&&c){var E=ke(f).closePathSelect(!0).closePathDistance(100).items(s.data(n)).targetArea(e);E.on("start",(function(){w.current&&E.items().attr("r",3.5).classed("not_possible",!0).classed("selected",!1)})),E.on("draw",(function(){w.current&&(E.possibleItems().classed("not_possible",!1).classed("possible",!0),E.notPossibleItems().classed("not_possible",!0).classed("possible",!1))})),E.on("end",(function e(){if(w.current){E.items().classed("not_possible",!1).classed("possible",!1);var t=[];E.selectedItems().each((function(e){return t.push(e.qElemNumber)})),e(),E.notSelectedItems()}})),e.call(E)}var q=f.select(S.current);s.on("mouseover",(function(e){f.select(this).style("opacity",1),q.select(".title").text(e.dimensions[0].value),q.select(".content").text(""),e.measures.forEach((function(e){q.select(".content").append("span").attr("class","measure").html("<span>".concat(e.label,"</span>&nbsp;&nbsp;&nbsp;<strong>").concat(e.format(e.value),"</strong>"))})),q.style("opacity",1)})).on("mousemove",(function(e){q.style("transform","translateX(calc(".concat(K.left+r(we(e)),"px - 50%)) translateY(").concat(a(Se(e))-30,"px)"))})).on("mouseout",(function(e){q.style("opacity",0),f.select(this).transition("restoreBarColor").duration(150).style("opacity",g)})).on("click",(function(e){m(e)}))}}),[j,H,I,N,z,m,w,d,t,te,c,K,V,ee]),Object(r.useEffect)((function(){if(H.y){var e=f.select(k.current),t=f.axisLeft(H.y);t.tickFormat(j[0].measures[0].format),v&&t.ticks(v),e.select(".y.axis").call(t).transition().duration(300);var n=f.axisBottom(H.x);h&&n.tickFormat(h),x&&n.ticks(x),e.select(".x.axis").call(n).transition().duration(300).attr("transform","translate(0,".concat(N,")")).attr("clip-path","url(#outer-clip)").selectAll("text").attr("transform","rotate(-45) translate(-10, -6)").style("text-anchor","end").attr("dx","6").attr("dy","4"),e.select(".x.axis").selectAll(".domain, .tick line").attr("clip-path","url(#inner-clip)"),e.select(".chart-title").attr("transform","translate(".concat(I/2,", -35)")).style("text-anchor","middle").style("font-size","25px").style("font-weight","bold")}})),a.a.createElement(a.a.Fragment,null,a.a.createElement("svg",{ref:k,width:s,height:u},a.a.createElement("text",{className:"chart-title",fill:"#fff"},b),a.a.createElement("text",{transform:"translate(".concat(I/2+K.left,", ").concat(N+K.middle,")"),className:"x-axis-label",textAnchor:"middle"},U),a.a.createElement("text",{className:"y-axis-label",transform:"translate(".concat(.5*K.left-(t.labels.xAxis.fontSize||t.labels.fontSize).replace(/\D/g,""),", ").concat(N/2+K.top,") rotate(-90)"),textAnchor:"middle"},Q),a.a.createElement("g",{className:"inner-box",pointerEvents:"all",transform:"translate(".concat(K.left,", ").concat(K.top,")")},a.a.createElement("rect",{className:"zoom-sensor",transform:"translate(0, -".concat(K.top,")"),width:I,height:u,style:{fill:"none"},pointerEvents:"all"}),a.a.createElement("path",{className:"line",clipPath:"url(#inner-clip)"}),a.a.createElement("g",{className:"bars"}),a.a.createElement("g",{className:"x axis"}),a.a.createElement("g",{className:"y axis"}),1!==ee?a.a.createElement(a.a.Fragment,null,a.a.createElement("g",{className:"viewbox",transform:"translate(0, ".concat(N+K.middle,")"),pointerEvents:"none"},a.a.createElement("rect",{fill:t.viewbox.backgroundFill,width:I,height:z}),a.a.createElement("g",{className:"viewbox bars"})),a.a.createElement("g",{className:"brush"})):a.a.createElement(a.a.Fragment,null),a.a.createElement("clipPath",{id:"inner-clip"},a.a.createElement("rect",{transform:"translate(0, -".concat(K.top,")"),width:I,height:u})),a.a.createElement("clipPath",{id:"outer-clip"},a.a.createElement("rect",{transform:"translate(-8, -".concat(K.top,")"),width:I+8,height:u})))),a.a.createElement(g,{ref:S}))},Ce=0,Ne=0,Te=function(e){return e.dimensions[0].value},Me=function(e){return e.measures[0].value};function Le(){var e=Object(s.a)(["\n  position: absolute;\n  pointer-events: none;\n  top: 0;\n  left: 0;\n  opacity: ",';\n  padding: 6px 16px 7px 16px;\n  font-size: 0.8em;\n  background-color: rgba(30,30,30,0.65);\n  color: #fff;\n  border-radius: 3px;\n  &::after {\n    content: "";\n    position: absolute;\n    top: 100%;\n    opacity: 1;\n    left: 50%;\n    transform: translateX(-50%);\n    border-width: 9px;\n    border-color: rgba(30,30,30,0.85) transparent transparent transparent;\n    border-style: solid;\n  }\n  .title {\n    font-size: 0.8em;\n    font-weight: 600;\n    display: block;\n    margin-bottom: 5px;\n  }\n  .subtitle {\n    font-size: 0.8em;\n    color: #777;\n  }\n  .content {\n    font-size: 0.7em;\n    line-height: 1.4;\n    .measure {\n      display: flex;\n      justify-content: space-between;\n      strong {\n        font-weight: 500;\n      }\n    }\n  }\n']);return Le=function(){return e},e}var ze=u.b.div(Le(),(function(e){return e.show?1:0})),Fe=a.a.forwardRef((function(e,t){return a.a.createElement(ze,{className:"tooltip",ref:t},a.a.createElement("span",{className:"title"},a.a.createElement("span",{className:"subtitle"})),a.a.createElement("div",{className:"content"}))}));function Ae(){var e=Object(s.a)(["\n  padding: 4px 8px;\n  border-radius: 5px;\n  z-index: 3;\n  position: absolute;\n  right: 0;\n  top: 6px;\n  display: flex;\n  background-color: ",";\n  svg {\n    fill: #fff !important;\n  }\n"]);return Ae=function(){return e},e}function Pe(){var e=Object(s.a)(["\n  margin-bottom: 30px;\n  border: 1px solid transparent;\n  border-radius: 5px;\n  position: relative;\n"]);return Pe=function(){return e},e}var Ie={barchart:Ee,scatterplot:ge,linechart:qe,piechart:function(e){var t=e.width,n=e.height,c=e.data,o=e.theme,s=e.TooltipComponent,u=e.onDimensionClick,d=e.selections,m=Object(r.useRef)(),b=Object(r.useRef)(),p=Object(r.useState)(0),h=Object(l.a)(p,2),x=h[0],v=h[1];return Object(r.useEffect)((function(){if(c&&c.length>0){var e={lower:f.quantile(c,.05,(function(e){return Me(e)})),upper:f.quantile(c,.9,(function(e){return Me(e)}))},r=o.colorScales.sequential([e.upper,e.lower]),a=f.select(m.current).select("g"),l=f.pie().padAngle(.01).value((function(e){return Me(e)}))(c);l=l.map((function(e){return Object(i.a)(Object(i.a)({},e),{},{startAngle:e.startAngle+x,endAngle:e.endAngle+x})}));var s=a.select(".paths").selectAll("path").data(l),p=Math.min(t,n)/2,h=function(e){return f.arc().innerRadius(.7*e).outerRadius(e-1)},v=h(p),g=h(.68*p);s.attr("d",(function(e){return g(e)})).attr("stroke",(function(e){return d.includes(e.data.qElemNumber)?o.selectionHighlight:"transparent"}));var y=function(e){return d.includes(e.data.qElemNumber)?1:.8};s.enter().append("path").attr("d",(function(e){return g(e)})).attr("fill",(function(e){return r(e.value)})).attr("stroke",(function(e){return d.includes(e.data.qElemNumber)?"#fff":"transparent"})).attr("opacity",y).append("text").text((function(e){return e.value})).attr("transform",(function(e){return"translate(".concat(g.centroid(e),")")})),s.exit().remove(),a.selectAll(".labels g").remove();var O=a.select(".labels").selectAll("g").data(l),j=function(e){return Math.abs(v.centroid(e)[1])<.7*p?1:0};O.enter().append("g").call((function(e){return e.append("text").text((function(e){return Te(e.data)})).attr("font-size",8).attr("fill",o.axisText.color).attr("opacity",j).attr("transform",(function(e){return"translate(".concat(v.centroid(e),")")})).attr("text-anchor",(function(e){return v.centroid(e)[0]>0?"start":"end"}))})).call((function(e){return e.append("line").attr("x1",(function(e){return h(.83*p).centroid(e)[0]})).attr("y1",(function(e){return h(.83*p).centroid(e)[1]})).attr("x2",(function(e){return h(.95*p).centroid(e)[0]})).attr("y2",(function(e){return h(.95*p).centroid(e)[1]})).attr("opacity",j).attr("stroke",o.axisText.color).attr("stroke-width",.8)}));var E=f.select(b.current);s.on("mouseover",(function(e){f.select(this).style("opacity",1),E.select(".title").text(Te(e.data)),E.select(".content").text(""),E.select(".content").append("span").attr("class","measure").html("<span>".concat(Te(e.data),"</span>&nbsp;&nbsp;&nbsp;<strong>").concat(Math.round(e.value),"</strong>")),E.style("opacity",1)})).on("mousemove",(function(e){var r=g.centroid(e);E.style("transform","translateX(calc(".concat(r[0]+t/2,"px - 50%)) translateY(calc(").concat(r[1]+n/2-30,"px - 50%))"))})).on("mouseout",(function(e){E.style("opacity",0),f.select(this).transition("restoreBarColor").duration(150).style("opacity",y)})).on("click",(function(e){u(e.data)}))}}),[c,x,d,n,o,u,t]),a.a.createElement(a.a.Fragment,null,a.a.createElement("svg",{ref:m,width:t,height:n,onWheel:function(e){var t=e.deltaY;v((function(e){return e+.1*Math.sign(t)})),f.select(b.current).style("opacity",0)}},a.a.createElement("g",{transform:"translate(".concat(Ce+t/2,", ").concat(Ne+n/2,")")},a.a.createElement("g",{className:"paths"}),a.a.createElement("g",{className:"labels"}))),a.a.createElement(s,{ref:b}))}},Re=u.b.div(Pe()),De=u.b.div(Ae(),(function(e){return e.theme.backgroundColor}));var Be=function(e){var t=e.documentTitle,n=e.objectId,c=e.dimensions,o=e.measures,s=e.title,f=e.xLabel,d=e.yLabel,m=e.theme,b=e.viewbox,h=e.type,v=e.xTickFormat,g=e.yTickFormat,y=e.xTickCount,j=e.yTickCount,E=e.height,w=function(e){var t=Object(r.useContext)(I).app;return{dimMeasureCheck:Object(r.useCallback)(function(){var e=Object(N.a)(C.a.mark((function e(n,r,a){var c,o,i,s,u,f,d,m,b,p,h,x,v;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Object(U.a)(n.entries()),e.prev=1,c.s();case 3:if((o=c.n()).done){e.next=16;break}return i=Object(l.a)(o.value,2),s=i[0],u=i[1],f=u.field||u,e.prev=6,e.next=9,t.getField(f);case 9:e.next=14;break;case 11:throw e.prev=11,e.t0=e.catch(6),new Error("The field '".concat(f,"', passed as the ").concat(W(s+1)," dimension to a ").concat(a," component was not found in the connected Qlik app. Please check that the value has been passed correctly, and that it is a field not a master dimension."));case 14:e.next=3;break;case 16:e.next=21;break;case 18:e.prev=18,e.t1=e.catch(1),c.e(e.t1);case 21:return e.prev=21,c.f(),e.finish(21);case 24:d=Object(U.a)(r.entries()),e.prev=25,d.s();case 27:if((m=d.n()).done){e.next=40;break}return b=Object(l.a)(m.value,2),p=b[0],h=b[1],x=h.formula||h,e.next=32,t.checkExpression(x);case 32:if(!(v=e.sent).qErrorMsg){e.next=35;break}throw new Error("The measure '".concat(x,"', passed as the ").concat(W(p+1)," measure to a ").concat(a," component was flagged as having invalid syntax by the connected Qlik app.\n  Please check your expression syntax and ensure there are no typos"));case 35:if(!(v.qBadFieldNames.length>0)){e.next=37;break}throw new Error("The measure '".concat(x,"', passed as the ").concat(W(p+1)," measure to a ").concat(a," component was flagged by the connected Qlik app as containing an invalid field. \n  Please check that the value has been passed correctly, and is a valid Qlik sense expression containing fields which exist in the connected app."));case 37:v.qDangerousFieldNames.length>0&&console.warn("The measure '".concat(x,"', passed as the ").concat(W(p+1)," measure to a ").concat(a," component was flagged by the connected Qlik app as containing a dangerous field."));case 38:e.next=27;break;case 40:e.next=45;break;case 42:e.prev=42,e.t2=e.catch(25),d.e(e.t2);case 45:return e.prev=45,d.f(),e.finish(45);case 48:case"end":return e.stop()}}),e,null,[[1,18,21,24],[6,11],[25,42,45,48]])})));return function(t,n,r){return e.apply(this,arguments)}}(),[t])}}().dimMeasureCheck,S=Object(r.useContext)(B),q=S.createObject,T=S.getObject,M=S.getObjectLayout,L=Object(r.useContext)(V),z=L.selections,F=L.selectValues,A=L.endSelections,P=Object(r.useContext)(k).theme,R=Object(r.useContext)(O),D=Object(r.useRef)(),H=Object(r.useRef)(),X=Object(r.useState)(null),Y=Object(l.a)(X,2),_=Y[0],J=Y[1],Q=Object(r.useState)(!1),$=Object(l.a)(Q,2),G=$[0],K=$[1],Z=Object(r.useState)(null),te=Object(l.a)(Z,2),ne=te[0],re=te[1],ae=Object(r.useState)(null),ce=Object(l.a)(ae,2),ie=ce[0],le=ce[1],se=Object(r.useState)(0),ue=Object(l.a)(se,2),fe=ue[0],be=ue[1],pe=Object(r.useState)(0),he=Object(l.a)(pe,2),xe=he[0],ve=he[1];Object(r.useEffect)((function(){var e;e=m?"string"===typeof m?p(m):m:P,J(e)}),[m,P]),Object(r.useEffect)((function(){if(h){if(H.current=h,!Ie[H.current])throw new Error('Unrecognized chart type, "'.concat(H.current,'" provided to Chart component. \n        Currently supported chart types are: ').concat(Object.keys(Ie).join(", ")));K(!0)}}),[h]);var ge=Object(r.useCallback)((function(e){return M(e).then((function(e){var t=e.qHyperCube,n=t.qDimensionInfo,r=t.qMeasureInfo,a=e.qHyperCube.qDataPages[0].qMatrix.map((function(e){return{qElemNumber:e[0].qElemNumber,dimensions:e.slice(0,n.length).map((function(e,t){return{label:c&&c[t]&&o[t].label?c[t].label:n[t].qFallbackTitle,value:"NaN"===e.qNum?e.qText:e.qNum}})),measures:e.slice(n.length).map((function(e,t){return{label:o&&o[t]&&o[t].label?o[t].label:r[t].qFallbackTitle,format:o&&o[t].format||function(e){return e},value:e.qNum}}))}}));return le(a),e}))}),[c,M,o]);Object(r.useEffect)((function(){be(D.current.getBoundingClientRect().width),ve(E||D.current.getBoundingClientRect().height)}),[R.width,E]),Object(r.useEffect)((function(){if(document.title=t,!ne)if(n)T(n).then((function(e){re(e),ge(e).then((function(e){if(!h){if(H.current=e.qInfo.qType,!Ie[H.current])throw new Error('Unrecognized chart type, "'.concat(H.current,'" provided to Chart component. \n                Currently supported chart types are: ').concat(Object.keys(Ie).join(", ")));K(!0)}})),e.on("changed",(function(){ge(e)}))}));else{w(c,o,h);var e={qDimensions:c.map((function(e){return{qDef:{qFieldDefs:[(e="string"===typeof e?{field:e}:e).field]},qNullSuppression:!!e.excludeNull}})),qMeasures:o.map((function(e){var t={qDef:{qDef:(e="string"===typeof e?{formula:e}:e).formula}};return e.sorting?Object(i.a)(Object(i.a)({},t),{},{qSortBy:e.sorting}):t})),qInitialDataFetch:[{qTop:0,qLeft:0,qWidth:c.length+o.length,qHeight:100}]};q("cube",e).then((function(e){re(e),ge(e),e.on("changed",(function(){ge(e)}))}))}}),[t,ne,c,o,ge,H,w,q,n,T,h]);var ye=Ie[H.current];return a.a.createElement(Re,{ref:D,className:"".concat(H,"-feature"),style:{borderColor:z.values.length>0&&z.selectedModelId===ne.id?"#bbb":"transparent"}},ie&&_&&ie.length>0?a.a.createElement(u.a,{theme:_},a.a.createElement(De,{className:"controls",style:{display:z.values.length>0&&z.selectedModelId===ne.id?"flex":"none"}},a.a.createElement(de,{onClick:function(e){A(!1).then((function(){ge(ne)}))}},a.a.createElement(ee,null)),a.a.createElement(me,{onClick:function(e){A(!0).then((function(){ge(ne)}))}},a.a.createElement(oe,null))),a.a.createElement(x,{className:"chart"},G&&a.a.createElement(ye,{data:ie,selections:z.selectedModelId===ne.id?z.values:[],onDimensionClick:function(e){F(ne.id,[e.qElemNumber]).then((function(){ge(ne)}))},width:fe,height:xe,xLabel:f,yLabel:d,title:s,theme:_,dotSizeRange:[4,9],viewbox:b,xTickFormat:v,yTickFormat:g,xTickCount:y,yTickCount:j,TooltipComponent:Fe}))):a.a.createElement("p",null,"No data"))},He=n(55),We=n(6);function Xe(){return(Xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ye(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var _e=a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),Ve=a.a.createElement("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z"}),Je=function(e){var t=e.svgRef,n=e.title,r=Ye(e,["svgRef","title"]);return a.a.createElement("svg",Xe({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),n?a.a.createElement("title",null,n):null,_e,Ve)},Ue=a.a.forwardRef((function(e,t){return a.a.createElement(Je,Xe({svgRef:t},e))}));n.p;function Qe(){return(Qe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $e(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ge=a.a.createElement("defs",null,a.a.createElement("path",{id:"a",d:"M0 0h24v24H0V0z"})),Ke=a.a.createElement("clipPath",{id:"b"},a.a.createElement("use",{xlinkHref:"#a",overflow:"visible"})),Ze=a.a.createElement("path",{clipPath:"url(#b)",d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79 2.73 2.71 7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58 3.51-3.47 9.14-3.47 12.65 0L21 3v7.12zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8h1.5z"}),et=function(e){var t=e.svgRef,n=e.title,r=$e(e,["svgRef","title"]);return a.a.createElement("svg",Qe({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),n?a.a.createElement("title",null,n):null,Ge,Ke,Ze)},tt=a.a.forwardRef((function(e,t){return a.a.createElement(et,Qe({svgRef:t},e))}));n.p;function nt(){return(nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var at=a.a.createElement("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),ct=a.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),ot=function(e){var t=e.svgRef,n=e.title,r=rt(e,["svgRef","title"]);return a.a.createElement("svg",nt({width:24,height:24,viewBox:"0 0 24 24",ref:t},r),n?a.a.createElement("title",null,n):null,at,ct)},it=a.a.forwardRef((function(e,t){return a.a.createElement(ot,nt({svgRef:t},e))}));n.p;function lt(){var e=Object(s.a)(["\n  margin: 1px 0;\n  padding: 8px 10px;\n  display: flex;\n  justify-content: center;\n  cursor: default;\n  position: relative;\n  &.S { background-color: #69ff69 } /* selected */\n  &.A { background-color: #ddd } /* selected */\n  &.X { background-color: #a9a9a9 } /* excluded */\n  &.XS { \n    /* selected excluded */\n    background-color: #a9a9a9;\n    &::after {\n      content: '\u2714';\n      position: absolute;\n      right: 10px;\n      top: 50%;\n      transform: translateY(-50%);\n      color: #fff;\n      font-size: 14px;\n    }\n  }\n  &:hover {\n    &::before {\n      position: absolute;\n      content: \"\";\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      background-color: rgba(0,0,0,0.1);\n    }\n  }\n"]);return lt=function(){return e},e}function st(){var e=Object(s.a)(["\n  margin: 7px;\n  display: flex;\n  justify-content: space-between;\n  div {\n    display: flex;\n  }\n"]);return st=function(){return e},e}function ut(){var e=Object(s.a)(["\n  color: #333; \n  background-color: #fff; \n  max-height: 300px; \n  overflow-y: auto; \n  font-size: 0.6em; \n  z-index: 2;\n"]);return ut=function(){return e},e}function ft(){var e=Object(s.a)(["\n  position: absolute;\n  top: 100%;\n  width: 200px;\n  z-index: 10;\n  svg {\n    fill: #fff !important;\n  }\n"]);return ft=function(){return e},e}var dt=u.b.div(ft()),mt=u.b.div(ut()),bt=u.b.div(st()),pt=u.b.div(lt());var ht=function(e){var t=e.onRequestClose,n=e.onClickAway,c=e.fieldInfo,o=e.fieldIndex,i=e.isExpanded,s=(e.onExpand,e.onClose,e.indexOfEl,Object(r.useContext)(B)),u=s.createObject,f=s.getObjectLayout,d=Object(r.useContext)(V),m=d.selections,b=d.beginSelections,p=d.selectValues,h=d.endSelections,x=Object(r.useState)(null),v=Object(l.a)(x,2),g=v[0],y=v[1],O=Object(r.useState)([]),j=Object(l.a)(O,2),E=j[0],k=j[1],w=function(e){var t=Object(r.useRef)();return Object(r.useEffect)((function(){t.current=e})),t.current}(m.selectedModelId),S=Object(r.useRef)();Object(r.useEffect)((function(){g&&w===g.id&&m.selectedModelId!==g.id&&t()}),[m.selectedModelId,g,w,t]);var q=Object(r.useRef)(!1);return Object(r.useEffect)((function(){var e=function(e){for(var t=!0,r=e.target;r.parentNode;){if(r===S.current){t=!1;break}r=r.parentNode}t&&n()};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}}),[n]),Object(r.useEffect)((function(){q.current=!0;var e=function(e){f(e).then((function(e){return q.current&&k(e.qListObject.qDataPages[0].qMatrix.flat(1)),e}))};return g?i&&b(g.id):u("list",{qDef:{qFieldDefs:[c.qField],qSortCriterias:[{qSortByState:1}]},qShowAlternatives:!0,qInitialDataFetch:[{qTop:0,qLeft:0,qWidth:1,qHeight:100}]},"".concat(c.qField,"_Selections")).then((function(t){y(t),i&&b(t.id),e(t),t.on("changed",(function(){e(t)}))})),function(){q.current=!1}}),[i,c.qField,g,f,b,u]),a.a.createElement(dt,{style:{left:"".concat(200*o,"px")},ref:S},a.a.createElement(mt,null,a.a.createElement(bt,null,a.a.createElement(fe,{onClick:function(){var e=E.map((function(e){return e.qElemNumber}));p(g.id,e,!1)}},"Select all"),a.a.createElement("div",null,a.a.createElement(de,{onClick:function(){h(!1).then((function(){t()}))}},a.a.createElement(ee,null)),a.a.createElement(me,{onClick:function(){h(!0).then((function(){t()}))}},a.a.createElement(oe,null)))),E.map((function(e){return a.a.createElement(pt,{key:e.qElemNumber,onClick:function(){return t=e.qElemNumber,void p(g.id,[t],!0);var t},className:e.qState},e.qText)}))))};function xt(){var e=Object(s.a)(["\n  width: 200px;\n  padding: 0 10px;\n  box-sizing: border-box;\n  display: grid;\n  grid-template-columns: 150px 22px;\n  column-gap: 8px;\n  align-content: center;\n  font-size: 0.8em;\n  overflow: hidden;\n  background-color: #fff;\n  cursor: pointer;\n  .title {\n    font-weight: 600;\n  }\n  .info > span {\n    display: block;\n    white-space: nowrap;\n    font-weight: 400;\n    color: #8c8c8c;\n  }\n  .icon {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    svg {\n      fill: #8c8c8c;\n    }\n    &:hover svg {\n      fill: #404040;\n    }\n  }\n  &:hover {\n    background-color: #f6f6f6\n  }\n"]);return xt=function(){return e},e}function vt(){var e=Object(s.a)(["\n  display: flex;\n  height: ",";\n  border-bottom: 1px solid #d9d9d9;\n  position: relative;\n"]);return vt=function(){return e},e}function gt(){var e=Object(s.a)(["\n  display: flex;\n  justify-content: space-between;\n  padding: 0 6px;\n"]);return gt=function(){return e},e}function yt(){var e=Object(s.a)(["\n  display: grid;\n  grid-template-columns: 100px 1fr;\n  height: ",";\n  background-color: #f2f2f2;\n  border: 1px solid #d9d9d9;\n  & > div {\n    box-sizing: border-box;\n    &:nth-of-type(1) {\n      border-right: 1px solid #d9d9d9;\n    }\n    &:nth-of-type(2) {\n      background-color: #e6e6e6;\n      > div {\n        border-right: 1px solid #d9d9d9;\n      }\n    }\n  }\n"]);return yt=function(){return e},e}var Ot=u.b.div(yt(),"46px"),jt=u.b.div(gt()),Et=u.b.div(vt(),"46px"),kt=u.b.div(xt());function wt(){var e=Object(r.useContext)(I).app,t=Object(r.useContext)(B),n=t.objects,c=t.createObject,o=t.getObjectLayout,i=Object(r.useContext)(V),s=i.endSelections,u=i.clearFieldSelections,f=Object(r.useState)([]),d=Object(l.a)(f,2),m=d[0],b=d[1],p=Object(r.useState)(null),h=Object(l.a)(p,2),x=h[0],v=h[1],g=Object(r.useState)(null),y=Object(l.a)(g,2),O=y[0],j=y[1],E=Object(r.useRef)(),k=Object(r.useRef)(!1);Object(r.useEffect)((function(){fin.InterApplicationBus.publish("selection",m).then((function(){return console.log("Published")})).catch((function(e){return console.log(e)}))}),[m]),Object(r.useEffect)((function(){if(k.current=!0,!x){var t=n.find((function(e){return"selections"===e.type})).id;e.getObject(t).then((function(e){v(e),o(e).then((function(e){var t=e.qSelectionObject;b(t.qSelections)})),e.on("changed",(function(){o(e).then((function(e){var t=e.qSelectionObject;k.current&&b(t.qSelections)}))}))}))}return function(){k.current=!1}}),[x,n,c,o,e]),Object(r.useEffect)((function(){j(null)}),[m.length]);var w=Object(r.useCallback)((function(){return j(null)}),[]),S=Object(r.useCallback)((function(){s(!0).then((function(){j(null)}))}),[s]);return a.a.createElement(Ot,null,a.a.createElement(jt,null,a.a.createElement(fe,{onClick:function(){s(!0).then((function(){e.back()}))}},a.a.createElement(Ue,null)),a.a.createElement(fe,{onClick:function(){s(!0).then((function(){e.forward()}))}},a.a.createElement(tt,null))),a.a.createElement(Et,{ref:E},m.map((function(e,t){return a.a.createElement(kt,{key:t,onClick:function(){return function(e,t){j((function(n){return n&&n.info.qField===e.qField?null:{info:e,index:t}}))}(e,t)}},a.a.createElement("div",{className:"text"},a.a.createElement("span",{className:"title"},(n=e.qField).length>17?n.substr(0,17)+"...":n),a.a.createElement("span",{className:"info"},a.a.createElement("span",null,function(e){return e.qSelectedCount>1&&e.qSelectedCount<7?"".concat(e.qSelectedCount," of ").concat(e.qTotal):e.qSelected}(e)))),a.a.createElement("div",{className:"icon",onClick:function(t){var n;t.stopPropagation(),n=e.qField,s(!0).then((function(){u(n),j(null)}))}},a.a.createElement(it,null)));var n})),O&&a.a.createElement(ht,{key:O.info.qField,fieldInfo:O.info,fieldIndex:O.index,onRequestClose:w,onClickAway:S})))}function St(){return a.a.createElement(He.a,null,a.a.createElement("div",{className:"App"},a.a.createElement(We.c,null,a.a.createElement(We.a,{path:"/app0",component:function(){return a.a.createElement(wt,null)}}),a.a.createElement(We.a,{path:"/app1",component:function(){return a.a.createElement(Be,{documentTitle:"Line Chart",type:"linechart",dimensions:[{field:"Month",excludeNull:!0}],measures:[{formula:"Sum([Sales Margin Amount])",sorting:{qSortByNumberic:-1},format:function(e){return f.format(".2s")(e)},label:"Sales margin in Central US"}],theme:"sunsetblue",height:300})}}),a.a.createElement(We.a,{path:"/app3",component:function(){return a.a.createElement(Be,{documentTitle:"Pie Chart",objectId:"MEAjCJ",height:300})}}))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function qt(e){var t=e.children;return a.a.createElement(R,null,a.a.createElement(j,null,a.a.createElement(w,null,a.a.createElement(H,null,a.a.createElement(J,null,t)))))}o.a.render(a.a.createElement(qt,null,a.a.createElement(St,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[59,1,2]]]);
//# sourceMappingURL=main.cde47cb7.chunk.js.map